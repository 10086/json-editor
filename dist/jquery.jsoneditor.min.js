/*! JSON Editor v0.5.0 - JSON Schema -> HTML Editor
 * By Jeremy Dorn - https://github.com/jdorn/json-editor/
 * Released under the MIT license
 *
 * Date: 2014-03-16
 */
!function(a){var b;!function(){var a=!1,c=/xyz/.test(function(){})?/\b_super\b/:/.*/;b=function(){},b.extend=function(b){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in b)f[g]="function"==typeof b[g]&&"function"==typeof e[g]&&c.test(b[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,b[g]):b[g];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,d}}();var c=function(a){for(var b,d=1;d<arguments.length;d++){b=arguments[d];for(var e in b)b.hasOwnProperty(e)&&(b[e]&&b[e].constructor&&b[e].constructor===Object?(a[e]=a[e]||{},c(a[e],b[e])):a[e]=b[e])}return a},d=function(a,b){if(a.length){for(var c=0;c<a.length;c++)if(b(c,a[c])===!1)return}else for(var c in a)if(a.hasOwnProperty(c)&&b(c,a[c])===!1)return},e=window.requestAnimationFrame||function(a){window.setTimeout(a,16)},f=function(a,b){var c=document.createEvent("HTMLEvents");c.initEvent(b,!0,!0),a.dispatchEvent(c)},g=function(a,b){if(window.CustomEvent)var c=new CustomEvent(b,{bubbles:!0,cancelable:!0});else{var c=document.createEvent("CustomEvent");c.initCustomEvent(b,!0,!0)}a.dispatchEvent(c)};a.fn.jsoneditor=function(b){var c,d=a(this);if("value"===b){if(c=d.data("jsoneditor"),!c)throw"JSON Editor must be instantiated before getting or setting the value";if(!c.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before getting/setting the value";return arguments.length>1?(c.root.setValue(arguments[1]),this):c.root.getValue()}if("destroy"===b){if(c=d.data("jsoneditor"),!c)return this;if(!c.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before destroying";return c.schema=null,c.options=null,c.root.destroy(),c=null,d.data("jsoneditor",null),d.empty(),this}if("validate"===b){if(c=d.data("jsoneditor"),!c)throw"JSON Editor must be instantiated before trying to validate";if(!c.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before running validation";return arguments.length>1?c.validator.validate(arguments[1]):c.validation_results}b=b||{};var h=b.schema,i=b.startval,j=a.jsoneditor.themes[b.theme||a.jsoneditor.theme];if(!j)throw"Unknown theme "+(b.theme||a.jsoneditor.theme);c={schema:h,options:b,refs:{},theme:new j,template:b.template,ready:!1};var k=a.jsoneditor.iconlibs[b.iconlib||a.jsoneditor.iconlib];k&&(c.iconlib=new k),d.data("jsoneditor",c),c.root_container=c.theme.getContainer(),d.append(c.root_container);var l=function(a){return c.ready?void 0:(a.preventDefault(),a.stopPropagation(),!1)};c.root_container.addEventListener("change",l);var m=function(){c.ready&&(c.validation_results=c.validator.validate(c.root.getValue()),c.root.showValidationErrors(c.validation_results))};return c.root_container.addEventListener("change",m),c.root_container.addEventListener("set",m),c.validator=new a.jsoneditor.Validator(h,{ajax:b.ajax,refs:b.refs,no_additional_properties:b.no_additional_properties,required_by_default:b.required_by_default}),c.validator.ready(function(b){if(!c.ready){c.schema=b;var h=a.jsoneditor.getEditorClass(c.schema);c.root=new h({jsoneditor:d,schema:c.schema,container:c.root_container,required:!0}),i&&c.root.setValue(i),c.validation_results=c.validator.validate(c.root.getValue()),c.root.showValidationErrors(c.validation_results),c.ready=!0,e(function(){g(c.root_container,"ready"),f(c.root_container,"change")})}}),this},a.jsoneditor={template:null,theme:null,iconlib:null,editors:{},templates:{},themes:{},iconlibs:{},resolvers:[],custom_validators:[],getEditorClass:function(b){var c;if(d(a.jsoneditor.resolvers,function(d,e){var f;return(f=e(b))&&a.jsoneditor.editors[f]?(c=f,!1):void 0}),!c)throw"Unknown editor for schema "+JSON.stringify(b);if(!a.jsoneditor.editors[c])throw"Unknown editor "+c;return a.jsoneditor.editors[c]},compileTemplate:function(b,c){c=c||a.jsoneditor.template;var d;if("string"==typeof c){if(!a.jsoneditor.templates[c])throw"Unknown template engine "+c;if(d=a.jsoneditor.templates[c](),!d)throw"Template engine "+c+" missing required library."}else d=c;if(!d)throw"No template engine set";if(!d.compile)throw"Invalid template engine set";return d.compile(b)}},a.jsoneditor.Validator=b.extend({init:function(a,b){this.original_schema=a,this.options=b||{},this.refs=this.options.refs||{},this.ready_callbacks=[],this.options.ready&&this.ready(this.options.ready),this.getRefs()},ready:function(a){return this.is_ready?a.apply(self,[this.expanded]):this.ready_callbacks.push(a),this},getRefs:function(){var a=this;this._getRefs(this.original_schema,function(b){a.schema=b,a.expanded=a.expandSchema(a.schema),a.is_ready=!0,d(a.ready_callbacks,function(b,c){c.apply(a,[a.expanded])})})},_getRefs:function(a,b){var e,f,g,h,i=this,j=a===this.original_schema;if(a=c({},a),j&&a.definitions){var k=a.definitions;delete a.definitions,e=f=0,g=function(a){if(f>=e){if(h)return;h=!0,i._getRefs(a,b)}},d(k,function(){e++}),e?d(k,function(b,c){i._getRefs(c,function(c){i.refs["#/definitions/"+b]=c,f++,g(a)})}):g(a)}else if(a.$ref){var l=a.$ref;if(delete a.$ref,i.refs[l]&&i.refs[l]instanceof Array)i.refs[l].push(function(){a=c({},a,i.refs[l],a),b(a)});else if(i.refs[l])a=c({},a,i.refs[l],a),b(a);else{if(!i.options.ajax)throw"Must set ajax option to true to load external url "+l;var m=new XMLHttpRequest;m.open("GET",l,!0),m.onreadystatechange=function(){if(4==m.readyState){if(200===m.status){var e=JSON.parse(m.responseText);return i.refs[l]=[],i._getRefs(e,function(e){var f=i.refs[l];i.refs[l]=e,a=c({},a,i.refs[l],a),b(a),d(f,function(a,b){b()})}),void 0}throw"Failed to fetch ref via ajax- "+l}},m.send()}}else e=f=0,g=function(a){if(f>=e){if(h)return;h=!0,b(a)}},d(a,function(a,b){"object"==typeof b&&b&&b instanceof Array?d(b,function(a,b){"object"!=typeof b||!b||b instanceof Array||e++}):"object"==typeof b&&b&&e++}),e?d(a,function(b,c){"object"==typeof c&&c&&c instanceof Array?d(c,function(c,d){"object"!=typeof d||!d||d instanceof Array||i._getRefs(d,function(d){a[b][c]=d,f++,g(a)})}):"object"==typeof c&&c&&i._getRefs(c,function(c){a[b]=c,f++,g(a)})}):g(a)},validate:function(a){return this._validateSchema(this.schema,a)},_validateSchema:function(b,e,f){var g,h,i,j=[],k=JSON.stringify(e);if(f=f||"root",b=c({},b),b.required&&b.required===!0){if("undefined"==typeof e)return j.push({path:f,property:"required",message:"Property must be set"}),j}else if("undefined"==typeof e){if(!this.options.required_by_default)return j;j.push({path:f,property:"required",message:"Property must be set"})}if(b.enum){for(g=!1,h=0;h<b.enum.length;h++)k===JSON.stringify(b.enum[h])&&(g=!0);g||j.push({path:f,property:"enum",message:"Value must be one of the enumerated values"})}if(b.extends)for(h=0;h<b.extends.length;h++)j=j.concat(this._validateSchema(b.extends[h],e,f));if(b.allOf)for(h=0;h<b.allOf.length;h++)j=j.concat(this._validateSchema(b.allOf[h],e,f));if(b.anyOf){for(g=!1,h=0;h<b.anyOf.length;h++)if(!this._validateSchema(b.anyOf[h],e,f).length){g=!0;break}g||j.push({path:f,property:"anyOf",message:"Value must validate against at least one of the provided schemas"})}if(b.oneOf){g=0;var l=[];for(h=0;h<b.oneOf.length;h++){var m=this._validateSchema(b.oneOf[h],e,f);m.length||g++;for(var i=0;i<m.length;i++)m[i].path=f+".oneOf["+h+"]"+m[i].path.substr(f.length);l=l.concat(m)}1!==g&&(j.push({path:f,property:"oneOf",message:"Value must validate against exactly one of the provided schemas. It currently validates against "+g+" of the schemas."}),j=j.concat(l))}if(b.not&&(this._validateSchema(b.not,e,f).length||j.push({path:f,property:"not",message:"Value must not validate against the provided schema"})),b.type)if(b.type instanceof Array){for(g=!1,h=0;h<b.type.length;h++)if(this._checkType(b.type[h],e)){g=!0;break}g||j.push({path:f,property:"type",message:"Value must be one of the provided types"})}else this._checkType(b.type,e)||j.push({path:f,property:"type",message:"Value must be of type "+b.type});if(b.disallow)if(b.disallow instanceof Array){for(g=!0,h=0;h<b.disallow.length;h++)if(this._checkType(b.disallow[h],e)){g=!1;break}g||j.push({path:f,property:"disallow",message:"Value must not be one of the provided disallowed types"})}else this._checkType(b.disallow,e)&&j.push({path:f,property:"disallow",message:"Value must not be of type "+b.disallow});if("number"==typeof e)(b.multipleOf||b.divisibleBy)&&(g=e/(b.multipleOf||b.divisibleBy),g!==Math.floor(g)&&j.push({path:f,property:b.multipleOf?"multipleOf":"divisibleBy",message:"Value must be a multiple of "+(b.multipleOf||b.divisibleBy)})),b.maximum&&(b.exclusiveMaximum&&e>=b.maximum?j.push({path:f,property:"maximum",message:"Value must be less than "+b.maximum}):!b.exclusiveMaximum&&e>b.maximum&&j.push({path:f,property:"maximum",message:"Value must be at most "+b.maximum})),b.minimum&&(b.exclusiveMinimum&&e<=b.minimum?j.push({path:f,property:"minimum",message:"Value must be greater than "+b.minimum}):!b.exclusiveMinimum&&e<b.minimum&&j.push({path:f,property:"minimum",message:"Value must be at least "+b.minimum}));else if("string"==typeof e)b.maxLength&&(e+"").length>b.maxLength&&j.push({path:f,property:"maxLength",message:"Value must be at most "+b.maxLength+" characters long"}),b.minLength&&(e+"").length<b.minLength&&j.push({path:f,property:"minLength",message:"Value must be at least "+b.minLength+" characters long"}),b.pattern&&(new RegExp(b.pattern).test(e)||j.push({path:f,property:"pattern",message:"Value must match the provided pattern"}));else if("object"==typeof e&&null!==e&&e instanceof Array){if(b.items)if(b.items instanceof Array)for(h=0;h<e.length;h++)if(b.items[h])j=j.concat(this._validateSchema(b.items[h],e[h],f+"."+h));else{if(b.additionalItems===!0)break;if(!b.additionalItems){if(b.additionalItems===!1){j.push({path:f,property:"additionalItems",message:"No additional items allowed in this array"});break}break}j=j.concat(this._validateSchema(b.additionalItems,e[h],f+"."+h))}else for(h=0;h<e.length;h++)j=j.concat(this._validateSchema(b.items,e[h],f+"."+h));if(b.maxItems&&e.length>b.maxItems&&j.push({path:f,property:"maxItems",message:"Value must have at most "+b.maxItems+" items"}),b.minItems&&e.length<b.minItems&&j.push({path:f,property:"minItems",message:"Value must have at least "+b.minItems+" items"}),b.uniqueItems){var n={};for(h=0;h<e.length;h++){if(g=JSON.stringify(e[h]),n[g]){j.push({path:f,property:"uniqueItems",message:"Array must have unique items"});break}n[g]=!0}}}else if("object"==typeof e&&null!==e){if(b.maxProperties){g=0;for(h in e)e.hasOwnProperty(h)&&g++;g>b.maxProperties&&j.push({path:f,property:"maxProperties",message:"Object must have at most "+b.maxProperties+" properties"})}if(b.minProperties){g=0;for(h in e)e.hasOwnProperty(h)&&g++;g<b.minProperties&&j.push({path:f,property:"minProperties",message:"Object must have at least "+b.minProperties+" properties"})}if(b.required&&b.required instanceof Array)for(h=0;h<b.required.length;h++)"undefined"==typeof e[b.required[h]]&&j.push({path:f,property:"required",message:"Object is missing the required property "+b.required[h]});var o={};if(b.properties)for(h in b.properties)b.properties.hasOwnProperty(h)&&(o[h]=!0,j=j.concat(this._validateSchema(b.properties[h],e[h],f+"."+h)));if(b.patternProperties)for(h in b.patternProperties)if(b.patternProperties.hasOwnProperty(h)){var p=new RegExp(h);for(i in e)e.hasOwnProperty(i)&&p.test(i)&&(o[i]=!0,j=j.concat(this._validateSchema(b.patternProperties[h],e[i],f+"."+i)))}if("undefined"!=typeof b.additionalProperties||!this.options.no_additional_properties||b.oneOf||b.anyOf||(b.additionalProperties=!1),"undefined"!=typeof b.additionalProperties)for(h in e)if(e.hasOwnProperty(h)&&!o[h]){if(!b.additionalProperties){j.push({path:f,property:"additionalProperties",message:"No additional properties allowed, but property "+h+" is set"});break}if(b.additionalProperties===!0)break;j=j.concat(this._validateSchema(b.additionalProperties,e[h],f+"."+h))}if(b.dependencies)for(h in b.dependencies)if(b.dependencies.hasOwnProperty(h)&&"undefined"!=typeof e[h])if(b.dependencies[h]instanceof Array)for(i=0;i<b.dependencies[h].length;i++)"undefined"==typeof e[b.dependencies[h][i]]&&j.push({path:f,property:"dependencies",message:"Must have property "+b.dependencies[h][i]});else j=j.concat(this._validateSchema(b.dependencies[h],e,f))}return d(a.jsoneditor.custom_validators,function(a,c){j=j.concat(c(b,e,f))}),j},_checkType:function(a,b){return"string"==typeof a?"string"===a?"string"==typeof b:"number"===a?"number"==typeof b:"integer"===a?"number"==typeof b&&b===Math.floor(b):"boolean"===a?"boolean"==typeof b:"array"===a?b instanceof Array:"object"===a?null!==b&&!(b instanceof Array)&&"object"==typeof b:"null"===a?null===b:!0:!this._validateSchema(a,b).length},expandSchema:function(a){var b,e=this,f=a;if("object"==typeof a.type&&(a.type instanceof Array?d(a.type,function(b,c){"object"==typeof c&&(a.type[b]=e.expandSchema(c))}):a.type=e.expandSchema(a.type)),"object"==typeof a.disallow&&(a.disallow instanceof Array?d(a.disallow,function(b,c){"object"==typeof c&&(a.disallow[b]=e.expandSchema(c))}):a.disallow=e.expandSchema(a.disallow)),a.anyOf&&d(a.anyOf,function(b,c){a.anyOf[b]=e.expandSchema(c)}),a.dependencies&&d(a.dependencies,function(b,c){"object"!=typeof c||c instanceof Array||(a.dependencies[b]=e.expandSchema(c))}),a.items&&(a.items instanceof Array?d(a.items,function(b,c){"object"==typeof c&&(a.items[b]=e.expandSchema(c))}):a.items=e.expandSchema(a.items)),a.properties&&d(a.properties,function(b,c){"object"!=typeof c||c instanceof Array||(a.properties[b]=e.expandSchema(c))}),a.patternProperties&&d(a.patternProperties,function(b,c){"object"!=typeof c||c instanceof Array||(a.patternProperties[b]=e.expandSchema(c))}),a.not&&(a.not=this.expandSchema(a.not)),a.additionalProperties&&"object"==typeof a.additionalProperties&&(a.additionalProperties=e.expandSchema(a.additionalProperties)),a.additionalItems&&"object"==typeof a.additionalItems&&(a.additionalItems=e.expandSchema(a.additionalItems)),a.allOf){for(b=0;b<a.allOf.length;b++)f=this.extend(f,this.expandSchema(a.allOf[b]));delete f.allOf}if(a.extends){if(a.extends instanceof Array)for(b=0;b<a.extends.length;b++)f=this.extend(f,this.expandSchema(a.extends[b]));else f=this.extend(f,this.expandSchema(a.extends));delete f.extends}if(a.oneOf){var g=c({},f);for(delete g.oneOf,b=0;b<a.oneOf.length;b++)f.oneOf[b]=this.extend(this.expandSchema(a.oneOf[b]),g)}return f},extend:function(a,b){a=c({},a),b=c({},b);var e=this,f={};return d(a,function(a,c){"undefined"!=typeof b[a]?"required"===a&&"object"==typeof c&&c instanceof Array?f.required=c.concat(b[a]).reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[]):"type"===a?("object"!=typeof c&&(c=[c]),"object"!=typeof b.type&&(b.type=[b.type]),f.type=c.filter(function(a){return-1!==b.type.indexOf(a)}),1===f.type.length&&"string"==typeof f.type[0]&&(f.type=f.type[0])):f[a]="object"==typeof c&&c instanceof Array?c.filter(function(c){return-1!==b[a].indexOf(c)}):"object"==typeof c&&null!==c?e.extend(c,b[a]):c:f[a]=c}),d(b,function(b,c){"undefined"==typeof a[b]&&(f[b]=c)}),f}}),a.jsoneditor.AbstractEditor=b.extend({fireChangeEvent:function(){f(this.container,"change")},fireSetEvent:function(){g(this.container,"set")},fireChangeHeaderEvent:function(){g(this.container,"change_header_text")},init:function(b){var e=this;this.container=b.container,this.jsoneditor=b.jsoneditor,this.theme=this.jsoneditor.data("jsoneditor").theme,this.template_engine=this.jsoneditor.data("jsoneditor").template,this.iconlib=this.jsoneditor.data("jsoneditor").iconlib,this.options=c({},this.options||{},b.schema.options||{},b),this.schema=this.options.schema,b.path||this.schema.id||(this.schema.id="root"),this.path=b.path||"root",this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&"string"==typeof this.schema.type&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path),a(this.container).data("editor",this),this.container.editor=this,this.key=this.path.split(".").pop(),this.parent=b.parent,this.isRequired()||this.options.compact||(this.title_links=this.container.appendChild(this.theme.getFloatRightLinkHolder()),this.addremove=this.title_links.appendChild(this.theme.getLink("remove "+this.getTitle())),this.addremove.addEventListener("click",function(){return e.property_removed?e.addProperty():e.removeProperty(),e.fireChangeEvent(),!1})),this.container.addEventListener("change",e.watch_listener),this.container.addEventListener("set",e.watch_listener),this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener_firing=!1,this.watch_listener=function(){e.refreshWatchedFieldValues()&&e.onWatchedFieldChange()},this.schema.watch&&d(this.schema.watch,function(b,c){var d;c instanceof Array?d=[c[0]].concat(c[1].split(".")):(d=c.split("."),e.theme.closest(e.container,'[data-schemaid="'+d[0]+'"]')||d.unshift("#"));var f=d.shift();"#"===f&&(f=e.jsoneditor.data("jsoneditor").schema.id||"root");var g=e.theme.closest(e.container,'[data-schemaid="'+f+'"]');if(!g)throw"Could not find ancestor node with id "+f;var h=g.getAttribute("data-schemapath")+"."+d.join(".");e.watched[b]={root:g,path:d,editor:a(g).data("editor"),adjusted_path:h},g.addEventListener("change",e.watch_listener),g.addEventListener("set",e.watch_listener)}),this.schema.headerTemplate&&(this.header_template=a.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine)),this.build(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.watch_listener()},getButton:function(a,b,c){return b=this.iconlib?this.iconlib.getIcon(b):null,!b&&c&&(a=c,c=null),this.theme.getButton(a,b,c)},setButtonText:function(a,b,c,d){return c=this.iconlib?this.iconlib.getIcon(c):null,!c&&d&&(b=d,d=null),this.theme.setButtonText(a,b,c,d)},refreshWatchedFieldValues:function(){if(this.watched_values){var a={},b=!1,c=this;return this.watched&&d(this.watched,function(d,e){for(var f=e.editor.getValue(),g=-1,h=null;;){if(g++,g>=e.path.length){h=f;break}if(!f||"undefined"==typeof f[e.path[g]])break;f=f[e.path[g]]}c.watched_values[d]!==h&&(b=!0),a[d]=h}),a.self=this.getValue(),this.watched_values.self!==a.self&&(b=!0),this.watched_values=a,b}},getWatchedFieldValues:function(){return this.watched_values},updateHeaderText:function(){this.header&&(this.header.innerHTML="",this.header.appendChild(document.createTextNode(this.getHeaderText())))},getHeaderText:function(a){return this.header_text?this.header_text:a?this.schema.title:this.getTitle()},onWatchedFieldChange:function(){if(this.header_template){var a=c(this.getWatchedFieldValues(),{key:this.key,i:this.key,title:this.getTitle()}),b=this.header_template(a);b!==this.header_text&&(this.header_text=b,this.updateHeaderText(),this.fireChangeHeaderEvent())}},addProperty:function(){this.property_removed=!1,this.addremove.innerHTML="",this.addremove.appendChild(document.createTextNode("remove "+this.getTitle()))},removeProperty:function(){this.property_removed=!0,this.addremove.innerHTML="",this.addremove.appendChild(document.createTextNode("add "+this.getTitle()))},build:function(){},isValid:function(a){a()},setValue:function(a){this.value=a},getValue:function(){return this.value},refreshValue:function(){},getChildEditors:function(){return!1},destroy:function(){var a=this;d(this.watched,function(b,c){c.root.removeEventListener("change",a.watch_listener),c.root.removeEventListener("set",a.watch_listener)}),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null},isRequired:function(){return"undefined"!=typeof this.options.required?this.options.required:"boolean"==typeof this.schema.required?this.schema.required:this.jsoneditor.data("jsoneditor").options.required_by_default?!0:!1},getDefault:function(){return this.schema.default||null},getTheme:function(){return this.theme},getSchema:function(){return this.schema},getContainer:function(){return this.container},getTitle:function(){return this.schema.title||this.key},getPath:function(){return this.path},getParent:function(){return this.parent},getOption:function(a,b){return"undefined"!=typeof this.options[a]?this.options[a]:b},getDisplayText:function(a){var b=[],c={};d(a,function(a,b){b.title&&(c[b.title]=c[b.title]||0,c[b.title]++),b.description&&(c[b.description]=c[b.description]||0,c[b.description]++),b.format&&(c[b.format]=c[b.format]||0,c[b.format]++),b.type&&(c[b.type]=c[b.type]||0,c[b.type]++)}),d(a,function(a,d){var e;e="string"==typeof d?d:d.title&&c[d.title]<=1?d.title:d.format&&c[d.format]<=1?d.format:d.type&&c[d.type]<=1?d.type:d.description&&c[d.description]<=1?d.descripton:d.title?d.title:d.format?d.format:d.type?d.type:d.description?d.description:JSON.stringify(d).length<50?JSON.stringify(d):"type",b.push(e)});var e={};return d(b,function(a,d){e[d]=e[d]||0,e[d]++,c[d]>1&&(b[a]=d+" "+e[d])}),b},showValidationErrors:function(){}}),a.jsoneditor.editors.null=a.jsoneditor.AbstractEditor.extend({getValue:function(){return null},setValue:function(){this.fireSetEvent()}}),a.jsoneditor.editors.string=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return this.schema.default||""},setValue:function(a,b,c){var d=this;if(a=a||"","object"==typeof a&&(a=JSON.stringify(a)),"string"!=typeof a&&(a=""+a),a!==this.serialized){!c&&a&&(this.last_set=a);var e=this.sanitize(a);this.select_options&&this.select_options.indexOf(e)<0&&(e=this.select_options[0]),this.input.value=e,this.sceditor_instance&&this.sceditor_instance.val(e),this.epiceditor&&this.epiceditor.importFile(null,e),this.refreshValue(),(this.getValue()!==a||c)&&d.fireChangeEvent(),this.fireSetEvent()}},removeProperty:function(){this._super(),this.input.style.display="none",this.description&&(this.description.style.display="none"),this.theme.disableLabel(this.label)},addProperty:function(){this._super(),this.input.style.display="",this.description&&(this.description.style.display=""),this.theme.enableLabel(this.label)},build:function(){var b=this;if(this.getOption("compact",!1)||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.schema.enum)this.input_type="select",this.select_options=this.schema.enum,this.input=this.theme.getSelectInput(this.select_options);else if(this.schema.enumSource)this.input_type="select",this.input=this.theme.getSelectInput([]),this.schema.enumValue&&(this.select_template=a.jsoneditor.compileTemplate(this.schema.enumValue,this.template_engine));else if(this.schema.format)if("textarea"===this.schema.format)this.input_type="textarea",this.input=this.theme.getTextareaInput();else if("html"===this.schema.format||"bbcode"===this.schema.format)this.input_type=this.schema.format,this.input=this.theme.getTextareaInput();else if("markdown"===this.schema.format)this.input_type="markdown",this.input=this.theme.getTextareaInput();else if("range"===this.schema.format){this.input_type="range";var c=this.schema.minimum||0,d=this.schema.maximum||Math.max(100,c+1),f=1;this.schema.multipleOf&&(c%this.schema.multipleOf&&(c=Math.ceil(c/this.schema.multipleOf)*this.schema.multipleOf),d%this.schema.multipleOf&&(d=Math.floor(d/this.schema.multipleOf)*this.schema.multipleOf),f=this.schema.multipleOf),this.input=this.theme.getRangeInput(c,d,f)}else this.input_type=this.schema.format,this.input=this.theme.getFormInputField(this.input_type);else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);"undefined"!=typeof this.schema.maxLength&&this.input.setAttribute("maxlength",this.schema.maxLength),"undefined"!=typeof this.schema.pattern?this.input.setAttribute("pattern",this.schema.pattern):"undefined"!=typeof this.schema.minLength&&this.input.setAttribute("pattern",".{"+this.schema.minLength+",}"),this.getOption("compact")&&this.container.setAttribute("class",this.container.getAttribute("class")+" compact"),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.input.disabled=!0),this.input.addEventListener("change",function(){if(b.schema.template)return this.value=b.value,void 0;var a=this.value,c=b.sanitize(a);a!==c&&(this.value=c),b.refreshValue()}),this.schema.format&&this.input.setAttribute("data-schemaformat",this.schema.format),this.control=this.getTheme().getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),"select"===this.input_type&&a.fn.select2&&a(this.input).select2(),e(function(){b.afterInputReady()}),this.schema.template?this.template=a.jsoneditor.compileTemplate(this.schema.template,this.template_engine):this.refreshValue()},afterInputReady:function(){var b=this;"html"===this.input_type||"bbcode"===this.input_type?a.fn.sceditor&&(a(b.input).sceditor({plugins:"html"===b.input_type?"xhtml":"bbcode",emoticonsEnabled:!1,width:"100%",height:300}),b.sceditor_instance=a(b.input).sceditor("instance"),b.sceditor_instance.blur(function(){var c=a("<div>"+b.sceditor_instance.val()+"</div>");a("#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf",c).remove(),b.input.value=c.html(),b.fireChangeEvent()})):"markdown"===this.input_type&&window.EpicEditor&&(this.epiceditor_container=document.createElement("div"),this.input.parentNode.insertBefore(this.epiceditor_container,this.input),this.input.style.display="none",this.epiceditor=new EpicEditor({container:this.epiceditor_container,clientSideStorage:!1,basePath:"//cdnjs.cloudflare.com/ajax/libs/epiceditor/0.2.0"}),this.epiceditor.on("update",function(){var a=b.epiceditor.exportFile();b.input.value=a,b.fireChangeEvent()}),this.epiceditor.load()),b.theme.afterInputReady(b.input)},refreshValue:function(){this.value=this.input.value,"string"!=typeof this.value&&(this.value=""),this.serialized=this.value},destroy:function(){this.sceditor_instance&&this.sceditor_instance.destroy(),this.epiceditor&&this.epiceditor.unload(),this.template=null,this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode.removeChild(this.description),this._super()},sanitize:function(a){return a},onWatchedFieldChange:function(){var a=this;if(this.template){var b=this.getWatchedFieldValues();this.setValue(this.template(b),!1,!0)}if(this.schema.enumSource){var b=this.getWatchedFieldValues(),c=[];if(!b[this.schema.enumSource])throw"Unknown enumSource "+this.schema.enumSource;d(b[this.schema.enumSource],function(b,d){var e;e=a.select_template?a.select_template({i:b,item:d}):d,e=""+e,-1===c.indexOf(e)&&c.push(e)}),this.theme.setSelectOptions(this.input,c),this.select_options=c,this.last_set&&-1!==c.indexOf(this.last_set)?this.setValue(this.last_set,!1,!0):-1===c.indexOf(this.getValue())&&this.setValue(c[0],!1,!0)}this._super()},showValidationErrors:function(a){var b=this,c=[];d(a,function(a,d){d.path===b.path&&c.push(d.message)}),c.length?this.theme.addInputError(this.input,c.join(". ")+"."):this.theme.removeInputError(this.input)}}),a.jsoneditor.editors.number=a.jsoneditor.editors.string.extend({getDefault:function(){return this.schema.default||0},sanitize:function(a){return(a+"").replace(/[^0-9\.\-]/g,"")},getValue:function(){return 1*this.value}}),a.jsoneditor.editors.integer=a.jsoneditor.editors.number.extend({sanitize:function(a){return a+="",a.replace(/[^0-9\-]/g,"")}}),a.jsoneditor.editors.object=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return c({},this.schema.default||{})},getChildEditors:function(){return this.editors},addProperty:function(){this._super(),this.editor_holder.style.display="block",this.title_controls.style.display="block",this.editjson_controls.style.display="block",this.addproperty_controls&&(this.addproperty_controls.style.display="block"),this.theme.enableHeader(this.title)},removeProperty:function(){this._super(),this.editor_holder.style.display="none",this.title_controls.style.display="none",this.editjson_controls.style.display="none",this.addproperty_controls&&(this.addproperty_controls.style.display="none"),a(this.cancel_editjson_button).trigger("click"),this.cancel_addproperty_button&&a(this.cancel_addproperty_button).trigger("click"),this.theme.disableHeader(this.title)},build:function(){this.editors={};var b=this;if(this.schema.properties=this.schema.properties||{},this.getOption("table_row",!1))this.editor_holder=this.container,d(this.schema.properties,function(c,d){var e=a.jsoneditor.getEditorClass(d,b.jsoneditor),f=b.editor_holder.appendChild(b.getTheme().getTableCell());b.editors[c]=new e({jsoneditor:b.jsoneditor,schema:d,container:f,path:b.path+"."+c,parent:b,compact:!0})});else{if(this.getOption("table",!1))throw"Not supported yet";this.title=this.getTheme().getHeader(this.getTitle()),this.container.appendChild(this.title),this.editjson_holder=this.theme.getTextareaInput(),this.container.appendChild(this.editjson_holder),this.editjson_holder.style.display="none",this.editjson_holder.style.height="100px",this.editjson_holder.style.width="100%",this.addproperty_holder=document.createElement("div"),this.container.appendChild(this.addproperty_holder),this.addproperty_holder.style.display="none",this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_input.setAttribute("placeholder","Property name..."),this.schema.description&&(this.description=this.getTheme().getDescription(this.schema.description),this.container.append(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.getTheme().getIndentedPanel(),this.container.appendChild(this.editor_holder),d(this.schema.properties,function(c,d){var e=a.jsoneditor.getEditorClass(d,b.jsoneditor),f=b.getTheme().getChildEditorHolder();b.editor_holder.appendChild(f);var g;b.schema.required&&b.schema.required instanceof Array&&(g=b.schema.required.indexOf(c)>=0),b.editors[c]=new e({jsoneditor:b.jsoneditor,schema:d,container:f,path:b.path+"."+c,parent:b,required:g})}),this.title_controls=this.getTheme().getHeaderButtonHolder(),this.editjson_controls=this.getTheme().getHeaderButtonHolder(),this.addproperty_controls=this.getTheme().getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.title.appendChild(this.editjson_controls),this.title.appendChild(this.addproperty_controls),this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse"),this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(){b.collapsed?(b.editor_holder.style.display="",b.collapsed=!1,b.setButtonText(b.toggle_button,"","collapse","Collapse")):(b.editor_holder.style.display="none",b.collapsed=!0,b.setButtonText(b.toggle_button,"","expand","Expand"))}),this.options.collapsed&&a(this.toggle_button).trigger("click"),this.editing_json=!1,this.editjson_button=this.getButton("JSON","edit","Edit JSON"),this.editjson_controls.appendChild(this.editjson_button),this.editjson_button.addEventListener("click",function(){if(b.editing_json){try{var c=JSON.parse(b.editjson_holder.value)}catch(d){return alert("Invalid JSON - "+d),!1}b.cancel_editjson_button.style.display="none",b.editjson_holder.style.display="none",b.setButtonText(b.editjson_button,"JSON","edito","Edit JSON"),b.editing_json=!1,b.setValue(c),a(b.editor_holder).trigger("change")}else b.editing_json=!0,b.cancel_editjson_button.style.display="",b.editjson_holder.value=JSON.stringify(b.value,null,2),b.editjson_holder.style.display="",b.setButtonText(b.editjson_button,"JSON","save","Save JSON");return!1}),this.cancel_editjson_button=this.getButton("","cancel","Cancel"),this.editjson_controls.appendChild(this.cancel_editjson_button),this.cancel_editjson_button.style.display="none",this.cancel_editjson_button.addEventListener("click",function(){return b.cancel_editjson_button.style.display="none",b.editjson_holder.style.display="none",b.setButtonText(b.editjson_button,"JSON","edit","Edit JSON"),b.editing_json=!1,!1
}),this.canHaveAdditionalProperties()&&(this.adding_property=!1,this.addproperty_button=this.getButton("Property","add","Add Property"),this.addproperty_controls.appendChild(this.addproperty_button),this.addproperty_button.addEventListener("click",function(){if(b.adding_property){var a=b.addproperty_input.value;if(b.editors[a])return alert("A property already exists with this name"),!1;b.cancel_addproperty_button.style.display="none",b.addproperty_holder.style.display="none",b.setButtonText(b.addproperty_button,"Property","add","Add Property"),b.adding_property=!1,b.addObjectProperty(a)}else b.adding_property=!0,b.addproperty_input.value="",b.cancel_addproperty_button.style.display="",b.addproperty_holder.style.display="",b.setButtonText(b.addproperty_button,"Property","save","Save Property");return!1}),this.cancel_addproperty_button=this.getButton("","cancel","Cancel"),this.addproperty_controls.appendChild(this.cancel_addproperty_button),this.cancel_addproperty_button.style.display="none",this.cancel_addproperty_button.addEventListener("click",function(){return b.cancel_addproperty_button.style.display="none",b.addproperty_holder.style.display="none",b.setButtonText(b.addproperty_button,"Property","add","Add Property"),b.adding_property=!1,!1}))}b.editor_holder.addEventListener("change",function(){b.refreshValue()})},canHaveAdditionalProperties:function(){return this.schema.additionalProperties!==!1&&!this.jsoneditor.data("jsoneditor").options.no_additional_properties},addObjectProperty:function(b){var e=this;if(e.editors[b])return!1;var f={},g=!1;e.schema.patternProperties&&d(e.schema.patternProperties,function(a,d){var e=new RegExp(a);e.test(b)&&(g=!0,f=c(f,d))}),g||"object"!=typeof e.schema.additionalProperties||(f=c(f,e.schema.additionalProperties));var h=a.jsoneditor.getEditorClass(f,e.jsoneditor),i=e.getTheme().getChildEditorHolder();e.editor_holder.appendChild(i),e.editors[b]=new h({jsoneditor:e.jsoneditor,schema:f,container:i,path:e.path+"."+b,parent:e,required:!1}),e.editors[b].not_core=!0,a(i).trigger("change")},destroy:function(){d(this.editors,function(a,b){b.destroy()}),this.editor_holder.innerHTML="",this.title&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,this._super()},refreshValue:function(){this.value={},this.serialized="";var a=this,b=0,c=!1,e=this.editors;d(this.editors,function(a,b){b.property_removed&&b.not_core&&(e={},c=!0)}),d(this.editors,function(d,f){if(f.addremove&&(f.addremove.style.display=""),f.property_removed){if(!f.not_core&&c)e[d]=f;else if(f.not_core){var g=f.container;f.destroy(),g.parentNode.removeChild(g)}}else c&&(e[d]=f),b++,a.value[d]=f.getValue()}),this.editors=e,"undefined"!=typeof this.schema.minProperties&&b<=this.schema.minProperties&&d(this.editors,function(a,b){!b.property_removed&&b.addremove&&(b.addremove.style.display="none")}),"undefined"!=typeof this.schema.maxProperties&&b>=this.schema.maxProperties&&d(this.editors,function(a,b){b.property_removed&&b.addremove&&(b.addremove.style.display="none")})},setValue:function(b,c){if(b=b||{},("object"!=typeof b||b instanceof Array)&&(b={}),d(this.editors,function(d,e){if("undefined"!=typeof b[d])e.property_removed&&e.addremove&&a(e.addremove).trigger("click"),e.setValue(b[d],c);else{if(!c&&!e.property_removed&&!e.isRequired()&&e.addremove)return a(e.addremove).trigger("click"),void 0;e.setValue(e.getDefault(),c)}}),this.canHaveAdditionalProperties()){var e=this;d(b,function(a,b){e.editors[a]||(e.addObjectProperty(a),e.editors[a]&&e.editors[a].setValue(b,c))})}this.refreshValue(),this.fireSetEvent()},showValidationErrors:function(a){var b=this,c=[],e=[];if(d(a,function(a,d){d.path===b.path?c.push(d):e.push(d)}),this.error_holder)if(c.length){this.error_holder.innerHTML="",this.error_holder.style.display="",d(c,function(a,c){b.error_holder.appendChild(b.theme.getErrorMessage(c.message))})}else this.error_holder.style.display="none";this.getOption("table_row")&&(c.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),d(this.editors,function(a,b){b.showValidationErrors(e)})}}),a.jsoneditor.editors.array=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return this.schema.default||[]},addProperty:function(){this._super(),this.row_holder.style.display="",this.tabs_holder&&(this.tabs_holder.style.display=""),this.controls.style.display="",this.title_controls.style.display="",this.theme.enableHeader(this.title)},removeProperty:function(){this._super(),this.row_holder.style.display="none",this.tabs_holder&&(this.tabs_holder.style.display="none"),this.controls.style.display="none",this.title_controls.style.display="none",this.theme.disableHeader(this.title)},build:function(){this.rows=[],this.row_cache=[];var a=this;this.getOption("compact",!1)?(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.title=this.theme.getHeader(this.getTitle()),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),"tabs"===this.schema.format?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls))),this.row_holder.addEventListener("change",function(){a.refreshValue()}),this.row_holder.addEventListener("change_header_text",function(){a.refreshTabs(!0)}),this.addControls()},getItemTitle:function(){return this.schema.items&&this.schema.items.title||"item"},getItemSchema:function(a){return this.schema.items instanceof Array?a>=this.schema.items.length?this.schema.additionalItems===!0?{}:this.schema.additionalItems?c({},this.schema.additionalItems):void 0:c({},this.schema.items[a]):this.schema.items?c({},this.schema.items):{}},getItemInfo:function(b){var c=this.getItemSchema(b);this.item_info=this.item_info||{};var d=JSON.stringify(c);if("undefined"!=typeof this.item_info[d])return this.item_info[d];var e=document.createElement("div");this.container.appendChild(e),e.addEventListener("change",function(a){a.preventDefault(),a.stopPropagation()}),e.addEventListener("set",function(a){a.preventDefault(),a.stopPropagation()}),e.addEventListener("change_header_text",function(a){a.preventDefault(),a.stopPropagation()});var f=a.jsoneditor.getEditorClass(c,this.jsoneditor);return f=new f({jsoneditor:this.jsoneditor,schema:c,container:e,path:this.path+"."+b,parent:this,required:!0}),this.item_info[d]={child_editors:f.getChildEditors()?!0:!1,title:c.title||"item","default":f.getDefault()},f.destroy(),e.remove(),this.item_info[d]},getElementEditor:function(b){var c=this.getItemInfo(b),d=this.getItemSchema(b);d.title=c.title+" "+b;var e,f=a.jsoneditor.getEditorClass(d,this.jsoneditor);e=this.tabs_holder?this.theme.getTabContent():c.child_editors?this.theme.getChildEditorHolder():this.theme.getIndentedPanel(),this.row_holder.appendChild(e);var g=new f({jsoneditor:this.jsoneditor,schema:d,container:e,path:this.path+"."+b,parent:this,required:!0});return g.title_controls||(g.array_controls=this.theme.getButtonHolder(),e.appendChild(g.array_controls)),g},destroy:function(){this.empty(!0),this.title&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode.removeChild(this.row_holder),this.controls&&this.controls.parentNode.removeChild(this.controls),this.panel&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,this._super()},empty:function(a){if(this.rows){var b=this;d(this.rows,function(c,d){a&&(d.tab&&d.tab.parentNode&&d.tab.parentNode.removeChild(d.tab),b.destroyRow(d,!0),b.row_cache[c]=null),b.rows[c]=null}),b.rows=[],a&&(b.row_cache=[])}},destroyRow:function(a,b){var c=a.container;b?(a.destroy(),c.parentNode&&c.parentNode.removeChild(c),a.tab&&a.tab.parentNode.removeChild(a.tab)):(a.tab&&(a.tab.style.display="none"),c.style.display="none")},getMax:function(){return this.schema.items instanceof Array&&0==this.schema.additionalItems?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0},refreshTabs:function(a){var b=this;d(this.rows,function(c,d){d.tab&&(a?d.tab_text.textContent=d.getHeaderText():d.tab===b.active_tab?(b.theme.markTabActive(d.tab),d.container.style.display=""):(b.theme.markTabInactive(d.tab),d.container.style.display="none"))})},setValue:function(a){a=a||[],a instanceof Array||(a=[a]);var b=JSON.stringify(a);if(b!==this.serialized){if(this.schema.minItems)for(;a.length<this.schema.minItems;)a.push(this.getItemInfo(a.length).default);this.getMax()&&a.length>this.getMax()&&(a=a.slice(0,this.getMax()));var c=this;d(a,function(a,b){c.rows[a]?c.rows[a].setValue(b):c.row_cache[a]?(c.rows[a]=c.row_cache[a],c.rows[a].setValue(b),c.rows[a].container.style.display="",c.rows[a].tab&&(c.rows[a].tab.style.display="")):c.addRow(b)});for(var e=a.length;e<c.rows.length;e++)c.destroyRow(c.rows[e]),c.rows[e]=null;c.rows=c.rows.slice(0,a.length);var f=null;d(c.rows,function(a,b){return b.tab===c.active_tab?(f=b.tab,!1):void 0}),!f&&c.rows.length&&(f=c.rows[0].tab),c.active_tab=f,c.refreshValue(),c.refreshTabs(),g(c.container,"set")}},refreshValue:function(){var a=this,b=this.value?this.value.length:0;if(this.value=[],d(this.rows,function(b,c){a.value[b]=c.getValue()}),b!==this.value.length){var c=this.schema.minItems&&this.schema.minItems>=this.rows.length;d(this.rows,function(b,d){d.movedown_button.style.display=b===a.rows.length-1?"none":"",d.delete_button.style.display=c?"none":"",a.value[b]=d.getValue()}),this.value.length?1===this.value.length?(this.remove_all_rows_button.style.display="none",this.delete_last_row_button.style.display=c?"none":""):c?(this.delete_last_row_button.style.display="none",this.delete_last_row_button.style.display="none"):(this.delete_last_row_button.style.display="",this.remove_all_rows_button.style.display=""):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"),this.add_row_button.style.display=this.getMax()&&this.getMax()<=this.rows.length?"none":""}},addRow:function(a){var b=this,c=this.rows.length;b.rows[c]=this.getElementEditor(c),b.row_cache[c]=b.rows[c],b.tabs_holder&&(b.rows[c].tab_text=document.createElement("span"),b.rows[c].tab_text.textContent=b.rows[c].getHeaderText(),b.rows[c].tab=b.theme.getTab(b.rows[c].tab_text),b.rows[c].tab.addEventListener("click",function(a){b.active_tab=b.rows[c].tab,b.refreshTabs(),a.preventDefault(),a.stopPropagation()}),b.theme.addTab(b.tabs_holder,b.rows[c].tab)),b.rows[c].delete_button=this.getButton(b.getItemTitle(),"delete","Delete "+b.getItemTitle()),b.rows[c].delete_button.className+=" delete",b.rows[c].delete_button.setAttribute("data-i",c),b.rows[c].delete_button.addEventListener("click",function(){var a=1*this.getAttribute("data-i"),c=b.getValue(),e=[],f=null;d(c,function(c,d){return c===a?(b.rows[c].tab===b.active_tab&&(b.rows[c+1]?f=b.rows[c+1].tab:c&&(f=b.rows[c-1].tab)),void 0):(e.push(d),void 0)}),b.setValue(e),f&&(b.active_tab=f,b.refreshTabs()),b.fireChangeEvent()}),b.rows[c].moveup_button=this.getButton("","moveup","Move up"),b.rows[c].moveup_button.className+=" moveup",b.rows[c].moveup_button.setAttribute("data-i",c),b.rows[c].moveup_button.addEventListener("click",function(){var a=1*this.getAttribute("data-i");if(!(0>=a)){var c=b.getValue(),d=c[a-1];c[a-1]=c[a],c[a]=d,b.setValue(c),b.active_tab=b.rows[a-1].tab,b.refreshTabs(),b.fireChangeEvent()}}),b.rows[c].movedown_button=this.getButton("","movedown","Move down"),b.rows[c].movedown_button.className+=" movedown",b.rows[c].movedown_button.setAttribute("data-i",c),b.rows[c].movedown_button.addEventListener("click",function(){var a=1*this.getAttribute("data-i"),c=b.getValue();if(!(a>=c.length-1)){var d=c[a+1];c[a+1]=c[a],c[a]=d,b.setValue(c),b.active_tab=b.rows[a+1].tab,b.refreshTabs(),b.fireChangeEvent()}});var e=b.rows[c].title_controls||b.rows[c].array_controls;e&&(e.appendChild(b.rows[c].delete_button),c&&e.appendChild(b.rows[c].moveup_button),e.appendChild(b.rows[c].movedown_button)),a&&b.rows[c].setValue(a),b.refreshTabs()},addControls:function(){var a=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse"),this.title_controls.appendChild(this.toggle_button),this.title_controls.addEventListener("click",function(){a.collapsed?(a.collapsed=!1,a.row_holder.style.display="",a.tabs_holder&&(a.tabs_holder.style.display=""),a.controls.style.display="",a.setButtonText(this,"","collapse","Collapse")):(a.collapsed=!0,a.row_holder.style.display="none",a.tabs_holder&&(a.tabs_holder.style.display="none"),a.controls.style.display="none",a.setButtonText(this,"","expand","Expand"))}),this.options.collapsed&&f(this.toggle_button.trigger,"click"),this.add_row_button=this.getButton(this.getItemTitle(),"add","Add "+this.getItemTitle()),this.add_row_button.addEventListener("click",function(){var b=a.rows.length;a.row_cache[b]?(a.rows[b]=a.row_cache[b],a.rows[b].container.style.display="",a.rows[b].tab&&(a.rows[b].tab.style.display="")):a.addRow(),a.active_tab=a.rows[b].tab,a.refreshTabs(),a.refreshValue(),a.fireChangeEvent()}),a.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton("Last "+this.getItemTitle(),"delete","Delete Last "+this.getItemTitle()),this.delete_last_row_button.addEventListener("click",function(){var b=a.getValue(),c=null;a.rows.length>1&&a.rows[a.rows.length-1].tab===a.active_tab&&(c=a.rows[a.rows.length-2].tab),b.pop(),a.setValue(b),c&&(a.active_tab=c,a.refreshTabs()),a.fireChangeEvent()}),a.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton("All","delete","Delete All"),this.remove_all_rows_button.addEventListener("click",function(){a.setValue([]),a.fireChangeEvent()}),a.controls.appendChild(this.remove_all_rows_button),a.tabs&&(this.add_row_button.style.width="100%",this.add_row_button.style.textAlign="left",this.add_row_button.style.marginBottom="3px",this.delete_last_row_button.style.width="100%",this.delete_last_row_button.style.textAlign="left",this.delete_last_row_button.style.marginBottom="3px",this.remove_all_rows_button.style.width="100%",this.remove_all_rows_button.style.textAlign="left",this.remove_all_rows_button.style.marginBottom="3px")},showValidationErrors:function(a){var b=this,c=[],e=[];if(d(a,function(a,d){d.path===b.path?c.push(d):e.push(d)}),this.error_holder)if(c.length){this.error_holder.innerHTML="",this.error_holder.style.display="",d(c,function(a,c){b.error_holder.appendChild(b.theme.getErrorMessage(c.message))})}else this.error_holder.style.display="none";d(this.rows,function(a,b){b.showValidationErrors(e)})}}),a.jsoneditor.editors.table=a.jsoneditor.editors.array.extend({addProperty:function(){this._super(),this.value.length&&(this.table.style.display="")},removeProperty:function(){this._super(),this.table.style.display="none"},build:function(){this.rows=[];var a=this;this.schema.items=this.schema.items||[],this.table=this.theme.getTable(),this.container.appendChild(this.table),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);var b=this.getElementEditor(0,!0);this.item_default=b.getDefault(),this.item_title=this.schema.items.title||"row",b.getChildEditors()&&(this.item_has_child_editors=!0),this.getOption("compact",!1)?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.title=this.theme.getHeader(this.getTitle()),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.panel.appendChild(this.description)),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.table),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.item_has_child_editors?d(b.getChildEditors(),function(b,c){a.header_row.appendChild(a.theme.getTableHeaderCell(c.getTitle()))}):a.header_row.appendChild(a.theme.getTableHeaderCell(this.item_title)),b.destroy(),this.row_holder.innerHTML="",a.header_row.appendChild(a.theme.getTableHeaderCell(" ")),this.row_holder.addEventListener("change",function(){a.refreshValue()}),this.addControls()},getItemDefault:function(){return c({},{"default":this.item_default}).default},getItemTitle:function(){return this.item_title},getElementEditor:function(b,d){var e=c({},this.schema.items),f=a.jsoneditor.getEditorClass(e,this.jsoneditor),g=this.row_holder.appendChild(this.theme.getTableRow()),h=g;this.item_has_child_editors||(h=this.theme.getTableCell(),g.appendChild(h)),d&&(h.addEventListener("change",function(a){a.preventDefault(),a.stopPropagation()}),h.addEventListener("set",function(a){a.preventDefault(),a.stopPropagation()}),h.addEventListener("change_header_text",function(a){a.preventDefault(),a.stopPropagation()}));var i=new f({jsoneditor:this.jsoneditor,schema:e,container:h,path:this.path+"."+b,parent:this,compact:!0,table_row:!0});return i.controls_cell=g.appendChild(this.theme.getTableCell()),i.row=g,i.table_controls=this.theme.getButtonHolder(),i.controls_cell.appendChild(i.table_controls),i.table_controls.style.margin=0,i.table_controls.style.padding=0,i},destroy:function(){this.innerHTML="",this.title&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.table.parentNode.removeChild(this.table),this.panel&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,this._super()},empty:function(){if(this.rows){var a=this;d(this.rows,function(b,c){a.item_has_child_editors||c.row.parentNode.removeChild(c.row),c.destroy(),a.rows[b]=null}),a.rows=[]}},setValue:function(a){if(a=a||[],this.schema.minItems)for(;a.length<this.schema.minItems;)a.push(this.getItemDefault());this.schema.maxItems&&a.length>this.schema.maxItems&&(a=a.slice(0,this.schema.maxItems));var b=JSON.stringify(a);if(b!==this.serialized){var c=!1,e=this;d(a,function(a,b){e.rows[a]?e.rows[a].setValue(b):(e.addRow(b),c=!0)});for(var f=a.length;f<e.rows.length;f++){var g=e.rows[f].container;e.item_has_child_editors||e.rows[f].row.parentNode.removeChild(e.rows[f].row),e.rows[f].destroy(),g.parentNode&&g.parentNode.removeChild(g),e.rows[f]=null,c=!0}e.rows=e.rows.slice(0,a.length),e.refreshValue(),c&&e.refreshRowButtons(),e.fireSetEvent()}},refreshRowButtons:function(){var a=this,b=this.schema.minItems&&this.schema.minItems>=this.rows.length;d(this.rows,function(c,d){d.movedown_button.style.display=c===a.rows.length-1?"none":"",d.delete_button.style.display=b?"none":""}),this.value.length?1===this.value.length?(this.table.style.display="",this.toggle_button.style.display="",this.remove_all_rows_button.style.display="none",this.delete_last_row_button.style.display=b?"none":""):(this.table.style.display="",this.toggle_button.style.display="",b?(this.delete_last_row_button.style.display="none",this.delete_last_row_button.style.display="none"):(this.delete_last_row_button.style.display="",this.remove_all_rows_button.style.display="")):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none",this.toggle_button.style.display="none",this.table.style.display="none"),this.add_row_button.style.display=this.schema.maxItems&&this.schema.maxItems<=this.rows.length?"none":""},refreshValue:function(){var a=this;this.value=[],d(this.rows,function(b,c){a.value[b]=c.getValue()}),this.serialized=JSON.stringify(this.value)},addRow:function(a){var b=this,c=this.rows.length;b.rows[c]=this.getElementEditor(c),b.rows[c].delete_button=this.getButton("","delete","Delete"),b.rows[c].delete_button.className+=" delete",b.rows[c].delete_button.setAttribute("data-i",c),b.rows[c].delete_button.addEventListener("click",function(){var a=1*this.getAttribute("data-i"),c=b.getValue(),e=[];d(c,function(b,c){b!==a&&e.push(c)}),b.setValue(e),b.fireChangeEvent()}),b.rows[c].moveup_button=this.getButton("","moveup","Move up"),b.rows[c].moveup_button.className+=" moveup",b.rows[c].moveup_button.setAttribute("data-i",c),b.rows[c].moveup_button.addEventListener("click",function(){var a=1*this.getAttribute("data-i");if(!(0>=a)){var c=b.getValue(),d=c[a-1];c[a-1]=c[a],c[a]=d,b.setValue(c),b.fireChangeEvent()}}),b.rows[c].movedown_button=this.getButton("","movedown","Move down"),b.rows[c].movedown_button.className+=" movedown",b.rows[c].movedown_button.setAttribute("data-i",c),b.rows[c].movedown_button.addEventListener("click",function(){var a=1*this.getAttribute("data-i"),c=b.getValue();if(!(a>=c.length-1)){var d=c[a+1];c[a+1]=c[a],c[a]=d,b.setValue(c),b.fireChangeEvent()}});var e=b.rows[c].table_controls;e.appendChild(b.rows[c].delete_button),c&&e.appendChild(b.rows[c].moveup_button),e.appendChild(b.rows[c].movedown_button),a&&b.rows[c].setValue(a)},addControls:function(){var a=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse"),this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(){a.collapsed?(a.collapsed=!1,a.panel.style.display="",a.setButtonText(this,"","collapse","Collapse")):(a.collapsed=!0,a.panel.style.display="none",a.setButtonText(this,"","expand","Expand"))}),this.options.collapsed&&f(this.toggle_button,"click"),this.add_row_button=this.getButton(this.getItemTitle(),"add","Add "+this.getItemTitle()),this.add_row_button.addEventListener("click",function(){a.addRow(),a.refreshValue(),a.refreshRowButtons(),a.fireChangeEvent()}),a.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton("Last "+this.getItemTitle(),"delete","Delete Last "+this.getItemTitle()),this.delete_last_row_button.addEventListener("click",function(){var b=a.getValue();b.pop(),a.setValue(b),a.fireChangeEvent()}),a.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton("All","delete","Delete All"),this.remove_all_rows_button.addEventListener("click",function(){a.setValue([]),a.fireChangeEvent()}),a.controls.appendChild(this.remove_all_rows_button)}}),a.jsoneditor.editors.multiple=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return null},build:function(){var b=this,e=this.container;if(this.types=[],this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else{if(this.schema.type&&"any"!==this.schema.type)this.types=this.schema.type instanceof Array?this.schema.type:[this.schema.type];else if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){var f=this.schema.disallow;"object"==typeof schema.disallow&&schema.disallow instanceof Array||(f=[this.schema.disallow]);var g=[];d(this.types,function(a,b){-1===f.indexOf(b)&&g.push(b)}),this.types=g}delete this.schema.type}this.display_text=this.getDisplayText(this.types),this.switcher=this.theme.getSelectInput(this.display_text),e.appendChild(this.switcher),this.switcher.addEventListener("change",function(){b.type=b.display_text.indexOf(a(this).val());var c=b.getValue();d(b.editors,function(a,d){b.type===a?(d.setValue(c,!0),d.container.style.display=""):d.container.style.display="none"}),b.refreshValue()}),this.switcher.style.marginBottom=0,this.switcher.style.float="right",this.editor_holder=this.theme.getIndentedPanel(),e.appendChild(this.editor_holder),this.type=0,this.editors=[],this.validators=[];var h=this.switcher.getElementsByTagName("option"),i=0;d(this.types,function(d,e){var f=b.theme.getChildEditorHolder();b.editor_holder.appendChild(f);var g;"string"==typeof e?(g=c({},b.schema),g.type=e):(g=c({},b.schema,e),e.required&&e.required instanceof Array&&b.schema.required&&b.schema.required instanceof Array&&(g.required=b.schema.required.concat(e.required))),b.validators[d]=new a.jsoneditor.Validator(g,{required_by_default:b.jsoneditor.data("jsoneditor").options.required_by_default,no_additional_properties:b.jsoneditor.data("jsoneditor").options.no_additional_properties});var j=a.jsoneditor.getEditorClass(g,b.jsoneditor);b.editors[d]=new j({jsoneditor:b.jsoneditor,schema:g,container:f,path:b.path,parent:b.parent,required:!0}),b.editors[d].option=h[i],f.addEventListener("change_header_text",function(){b.refreshHeaderText()}),d!==b.type&&(f.style.display="none"),i++}),this.editor_holder.addEventListener("change",function(){b.refreshValue()}),this.editor_holder.addEventListener("set",function(){b.refreshValue()}),this.refreshHeaderText(),this.switcher.value=this.display_text[this.type]},refreshHeaderText:function(){var a=[];d(this.editors,function(b,c){a.push(c.schema)});var b=this.getDisplayText(a);d(this.editors,function(a,c){c.option&&(c.option.innerHTML="",c.option.appendChild(document.createTextNode(b[a])))})},refreshValue:function(){this.value=this.editors[this.type].getValue()},setValue:function(a,b){var c=this;d(this.validators,function(b,d){return d.validate(a).length?void 0:(c.type=b,c.switcher.value=c.display_text[b],!1)}),this.editors[this.type].setValue(a,b),this.refreshValue(),this.fireSetEvent()},destroy:function(){d(this.editors,function(a,b){b.destroy()}),this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher.parentNode.removeChild(this.switcher),this._super()},showValidationErrors:function(a){var b=this;this.oneOf?d(this.editors,function(e,f){var g=b.path+".oneOf["+e+"]",h=[];d(a,function(a,d){if(d.path.substr(0,g.length)===g){var e=c({},d);e.path=b.path+e.path.substr(g.length),h.push(e)}}),f.showValidationErrors(h)}):d(this.editors,function(b,c){c.showValidationErrors(a)})}}),a.jsoneditor.editors.enum=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return this.schema.enum[0]},addProperty:function(){this._super(),this.display_area.style.display="",this.theme.enableHeader(this.title)},removeProperty:function(){this._super(),this.display_area.style.display="none",this.theme.disableHeader(this.title)},build:function(){this.getContainer();this.title=this.getTheme().getHeader(this.getTitle()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this.enum=this.schema.enum,this.selected=0,this.select_options=[],this.html_values=[];for(var a=this,b=0;b<this.enum.length;b++)this.select_options[b]=this.options.enum_titles[b]||"Value "+(b+1),this.html_values[b]=this.getHTML(this.enum[b]);this.switcher=this.theme.getSelectInput(this.select_options),this.container.appendChild(this.switcher),this.switcher.style.float="right",this.switcher.style.marginBottom=0,this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.switcher.addEventListener("change",function(){a.selected=a.select_options.indexOf(this.value),a.value=a.enum[a.selected],a.refreshValue(),a.fireChangeEvent()}),this.value=this.enum[0],this.refreshValue(),1===this.enum.length&&(this.switcher.style.display="none")},refreshValue:function(){var a=this;a.selected=-1;var b=JSON.stringify(this.value);return d(this.enum,function(c,d){return b===JSON.stringify(d)?(a.selected=c,!1):void 0}),a.selected<0?(a.setValue(a.enum[0]),void 0):(this.switcher.value=this.select_options[this.selected],this.display_area.innerHTML=this.html_values[this.selected],void 0)},getHTML:function(a){var b=this;if(null===a)return"<em>null</em>";if("object"==typeof a){var c="";return d(a,function(d,e){var f=b.getHTML(e);a instanceof Array||(f="<div><strong>"+d+"</strong>: "+f+"</div>"),c+="<li>"+f+"</li>"}),c=a instanceof Array?"<ol>"+c+"</ol>":"<ul>"+c+"</ul>"}return"boolean"==typeof a?a?"true":"false":"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},setValue:function(a){this.value=a,this.refreshValue(),this.fireSetEvent()},destroy:function(){this.display_area.parentNode.removeChild(this.display_area),this.title.parentNode.removeChild(this.title),this.switcher.parentNode.removeChild(this.switcher),this._super()}}),a.jsoneditor.editors.select=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return this.schema.default||""},setValue:function(a){a=this.typecast(a||"");var b=a;this.enum_values.indexOf(b)<0&&(b=this.enum_values[0]),this.input.value=this.enum_options[this.enum_values.indexOf(b)],this.value=b,b!==a&&f(this.input,"change"),f(this.input,"set")},typecast:function(a){return"boolean"===this.schema.type?!!a:"number"===this.schema.type?1*a:"integer"===this.schema.type?Math.floor(1*a):""+a},getValue:function(){return this.value},removeProperty:function(){this._super(),this.input.style.display="none",this.description&&(this.description.style.display="none"),this.theme.disableLabel(this.label)},addProperty:function(){this._super(),this.input.style.display="",this.description&&(this.description.style.display=""),this.theme.enableLabel(this.label)},build:function(){var b=this;if(this.getOption("compact",!1)||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.input_type="select",this.enum_options=[],this.enum_values=[],this.schema.enum)d(this.schema.enum,function(a,c){b.enum_options[a]=""+c,b.enum_values[a]=b.typecast(c)});else{if("boolean"!==this.schema.type)throw"'select' editor requires the enum property to be set.";b.enum_options=["true","false"],b.enum_values=[!0,!1]}this.getOption("compact")&&this.container.setAttribute("class",this.container.getAttribute("class")+" compact"),this.input=this.theme.getSelectInput(this.enum_options),(this.schema.readOnly||this.schema.readonly)&&(this.input.disabled=!0),this.input.addEventListener("change",function(){var a=this.value,c=a;-1===b.enum_options.indexOf(a)&&(c=b.enum_options[0]),b.value=b.enum_values[b.enum_options.indexOf(a)]}),this.control=this.getTheme().getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),this.value=this.enum_values[0],a.fn.select2&&this.enum_options.length>2&&a(this.input).select2(),b.theme.afterInputReady(b.input)},destroy:function(){this.label&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode.removeChild(this.description),this.input.parentNode.removeChild(this.input),this._super()}}),a.jsoneditor.AbstractTheme=b.extend({getContainer:function(){return document.createElement("div")},getFloatRightLinkHolder:function(){var a=document.createElement("div");return a.style=a.style||{},a.style.float="right",a.style["margin-left"]="10px",a},getLink:function(a){var b=document.createElement("a");return b.setAttribute("href","#"),b.appendChild(document.createTextNode(a)),b
},disableHeader:function(a){a.style.color="#ccc"},disableLabel:function(a){a.style.color="#ccc"},enableHeader:function(a){a.style.color=""},enableLabel:function(a){a.style.color=""},getFormInputLabel:function(a){var b=document.createElement("label");return b.appendChild(document.createTextNode(a)),b},getCheckboxLabel:function(a){return this.getFormInputLabel(a)},getHeader:function(a){var b=document.createElement("h3");return b.appendChild(document.createTextNode(a)),b},getCheckbox:function(){return this.getFormInputField("checkbox")},getSelectInput:function(a){var b=document.createElement("select");return a&&this.setSelectOptions(b,a),b},setSelectOptions:function(a,b){a.innerHTML="";for(var c=0;c<b.length;c++){var d=document.createElement("option");d.setAttribute("value",b[c]),d.appendChild(document.createTextNode(b[c])),a.appendChild(d)}},getTextareaInput:function(){var a=document.createElement("textarea");return a.style=a.style||{},a.style.width="100%",a.style.height="300px",a.style.boxSizing="border-box",a},getRangeInput:function(a,b,c){var d=this.getFormInputField("range");return d.setAttribute("min",a),d.setAttribute("max",b),d.setAttribute("step",c),d},getFormInputField:function(a){var b=document.createElement("input");return b.setAttribute("type",a),b},afterInputReady:function(){},getFormControl:function(a,b,c){var d=document.createElement("div");return d.setAttribute("class","form-control"),a&&d.appendChild(a),d.appendChild(b),c&&d.appendChild(c),d},getIndentedPanel:function(){var a=document.createElement("div");return a.style=a.style||{},a.style.paddingLeft="10px",a.style.marginLeft="10px",a.style.borderLeft="1px solid #ccc",a},getChildEditorHolder:function(){return document.createElement("div")},getDescription:function(a){var b=document.createElement("p");return b.appendChild(document.createTextNode(a)),b},getCheckboxDescription:function(a){return this.getDescription(a)},getFormInputDescription:function(a){return this.getDescription(a)},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){return document.createElement("div")},getButton:function(a,b,c){var d=document.createElement("button");return this.setButtonText(d,a,b,c),d},setButtonText:function(a,b,c,d){a.innerHTML="",c&&(a.appendChild(c),a.innerHTML+=" "),a.appendChild(document.createTextNode(b)),d&&a.setAttribute("title",d)},getTable:function(){return document.createElement("table")},getTableRow:function(){return document.createElement("tr")},getTableHead:function(){return document.createElement("thead")},getTableBody:function(){return document.createElement("tbody")},getTableHeaderCell:function(a){var b=document.createElement("th");return b.textContent=a,b},getTableCell:function(){var a=document.createElement("td");return a},getErrorMessage:function(a){var b=document.createElement("p");return b.style=b.style||{},b.style.color="red",b.appendChild(document.createTextNode(a)),b},addInputError:function(){},removeInputError:function(){},addTableRowError:function(){},removeTableRowError:function(){},getTabHolder:function(){var a=document.createElement("div");return a.innerHTML="<div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 130px;'></div><div style='clear:both;'></div>",a},applyStyles:function(a,b){a.style=a.style||{};for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])},closest:function(a,b){for(var c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector;a&&a!==document;)try{if(c.bind(a)(b))return a;a=a.parentNode}catch(d){throw console.log(a,b),d}return!1},getTab:function(a){var b=document.createElement("div");return b.appendChild(a),b.style=b.style||{},this.applyStyles(b,{border:"1px solid #ccc",borderWidth:"1px 0 1px 1px",textAlign:"center",lineHeight:"30px",borderRadius:"5px",borderBottomRightRadius:0,borderTopRightRadius:0,fontWeight:"bold",cursor:"pointer"}),b},getTabContentHolder:function(a){return a.children[1]},getTabContent:function(){return this.getIndentedPanel()},markTabActive:function(a){this.applyStyles(a,{opacity:1,background:"white"})},markTabInactive:function(a){this.applyStyles(a,{opacity:.5,background:""})},addTab:function(a,b){a.children[0].appendChild(b)}}),a.jsoneditor.themes.bootstrap2=a.jsoneditor.AbstractTheme.extend({getRangeInput:function(a,b,c){return this._super(a,b,c)},getSelectInput:function(a){var b=this._super(a);return b.style.width="auto",b},afterInputReady:function(a){a.controlgroup||(a.controlgroup=this.closest(a,".control-group"),a.controls=this.closest(a,"controls"),this.closest(a,".compact")&&(a.controlgroup.className=a.controlgroup.className.replace(/control-group/g,"").replace(/[ ]{2,}/g," "),a.controls.className=a.controlgroup.className.replace(/controls/g,"").replace(/[ ]{2,}/g," "),a.style.marginBottom=0))},getIndentedPanel:function(){var a=document.createElement("div");return a.className="well well-small",a},getFormInputDescription:function(a){var b=document.createElement("p");return b.className="help-inline",b.textContent=a,b},getFormControl:function(a,b,c){var d=document.createElement("div");d.className="control-group";var e=document.createElement("div");return e.className="controls",a&&"checkbox"===b.getAttribute("type")?(d.appendChild(e),a.className+=" checkbox",a.appendChild(b),e.appendChild(a)):(a&&(a.className+=" control-label",d.appendChild(a)),e.appendChild(b),d.appendChild(e)),c&&e.appendChild(c),d},getHeaderButtonHolder:function(){var a=this.getButtonHolder();return a.style.marginLeft="10px",a},getButtonHolder:function(){var a=document.createElement("div");return a.className="btn-group",a},getButton:function(a,b,c){var d=this._super(a,b,c);return d.className+=" btn btn-default",d},getTable:function(){var a=document.createElement("table");return a.className="table table-bordered",a.style.width="auto",a.style.maxWidth="none",a},addInputError:function(a,b){a.controlgroup&&(a.controlgroup.className+=" error",a.errmsg?a.errmsg.style.display="":(a.errmsg=document.createElement("p"),a.errmsg.className="help-block errormsg",a.controls.appendChild(a.errmsg)),a.errmsg.textContent=b)},removeInputError:function(a){a.errmsg&&(a.errmsg.style.display="none",a.controlgroup.className=a.controlgroup.className.replace(/\s?error/g,""))},getTabHolder:function(){var a=document.createElement("div");return a.className="tabbable tabs-left",a.innerHTML="<ul class='nav nav-tabs'></ul><div class='tab-content'></div>",a},getTab:function(a){var b=document.createElement("li"),c=document.createElement("a");return c.setAttribute("href","#"),c.appendChild(a),b.appendChild(c),b},getTabContentHolder:function(a){return a.children[1]},getTabContent:function(){var a=document.createElement("div");return a.className="tab-pane active",a},markTabActive:function(a){a.className+=" active"},markTabInactive:function(a){a.className=a.className.replace(/\s?active/g,"")},addTab:function(a,b){a.children[0].appendChild(b)}}),a.jsoneditor.themes.bootstrap3=a.jsoneditor.AbstractTheme.extend({getSelectInput:function(a){var b=this._super(a);return b.className+="form-control",b.style.width="auto",b},afterInputReady:function(a){a.controlgroup||(a.controlgroup=this.closest(a,".form-group"),this.closest(a,".compact")&&(a.controlgroup.style.marginBottom=0))},getTextareaInput:function(){var a=document.createElement("textarea");return a.className="form-control",a},getRangeInput:function(a,b,c){return this._super(a,b,c)},getFormInputField:function(a){var b=this._super(a);return b.className+="form-control",b},getFormControl:function(a,b,c){var d=document.createElement("div");return a&&"checkbox"===b.getAttribute("type")?(d.className+=" checkbox",a.appendChild(b),d.appendChild(a)):(d.className+=" form-group",a&&(a.className+=" control-label",d.appendChild(a)),d.appendChild(b)),c&&d.appendChild(c),d},getIndentedPanel:function(){var a=document.createElement("div");return a.className="well well-sm",a},getFormInputDescription:function(a){var b=document.createElement("p");return b.className="help-block",b.textContent=a,b},getHeaderButtonHolder:function(){var a=this.getButtonHolder();return a.style.marginLeft="10px",a},getButtonHolder:function(){var a=document.createElement("div");return a.className="btn-group",a},getButton:function(a,b,c){var d=this._super(a,b,c);return d.className+="btn btn-default",d},getTable:function(){var a=document.createElement("table");return a.className="table table-bordered",a.style.width="auto",a.style.maxWidth="none",a},addInputError:function(a,b){a.controlgroup&&(a.controlgroup.className+=" has-error",a.errmsg?a.errmsg.style.display="":(a.errmsg=document.createElement("p"),a.errmsg.className="help-block errormsg",a.controlgroup.appendChild(a.errmsg)),a.errmsg.textContent=b)},removeInputError:function(a){a.errmsg&&(a.errmsg.style.display="none",a.controlgroup.className=a.controlgroup.className.replace(/\s?has-error/g,""))},getTabHolder:function(){var a=this._super();return a.children[0].className+=" list-group",a},getTab:function(a){var b=document.createElement("a");return b.className="list-group-item",b.setAttribute("href","#"),b.textContent=a.textContent,b},markTabActive:function(a){a.className+=" active"},markTabInactive:function(a){a.className=a.className.replace(/\s?active/g,"")}}),a.jsoneditor.themes.foundation=a.jsoneditor.AbstractTheme.extend({getChildEditorHolder:function(){var a=document.createElement("div");return a.style.marginBottom="15px",a},getSelectInput:function(a){var b=this._super(a);return b.style.width="auto",b.style.minWidth="none",b.style.padding="5px",b.style.marginTop="3px",b},afterInputReady:function(a){this.closest(a,".compact")&&(a.style.marginBottom=0),a.group=this.closest(a,".form-control")},getFormInputDescription:function(a){var b=document.createElement("p");return b.textContent=a,b.style.marginTop="-10px",b.style.fontStyle="italic",b},getIndentedPanel:function(){var a=document.createElement("div");return a.className="panel",a},getHeaderButtonHolder:function(){var a=this.getButtonHolder();return a.style.display="inline-block",a.style.marginLeft="10px",a.style.verticalAlign="middle",a},getButtonHolder:function(){var a=document.createElement("div");return a.className="button-group",a},getButton:function(a,b,c){var d=this._super(a,b,c);return d.className+=" small button",d},addInputError:function(a,b){a.group&&(a.group.className+=" error",a.errmsg?a.errmsg.style.display="":(a.insertAdjacentHTML("afterend",'<small class="errormsg"></small>'),a.errmsg=a.parentNode.getElementsByClassName("errormsg")[0]),a.errmsg.textContent=b)},removeInputError:function(a){a.errmsg&&(a.errmsg.style.display="none")}}),a.jsoneditor.themes.foundation3=a.jsoneditor.themes.foundation.extend({getHeaderButtonHolder:function(){var a=this._super();return a.style.fontSize=".6em",a},getTabHolder:function(){var a=document.createElement("div");return a.className="row",a.innerHTML="<dl class='tabs vertical two columns'></dl><div class='tabs-content ten columns'></div>",a},getTab:function(a){var b=document.createElement("dd"),c=document.createElement("a");return c.setAttribute("href","#"),c.appendChild(a),b.appendChild(c),b},getTabContentHolder:function(a){return a.children[1]},getTabContent:function(){var a=document.createElement("div");return a.className="content active",a.style.paddingLeft="5px",a},markTabActive:function(a){a.className+=" active"},markTabInactive:function(a){a.className=a.className.replace(/\s*active/g,"")},addTab:function(a,b){a.children[0].appendChild(b)}}),a.jsoneditor.themes.foundation4=a.jsoneditor.themes.foundation.extend({getHeaderButtonHolder:function(){var a=this._super();return a.style.fontSize=".6em",a},getFormInputDescription:function(a){var b=this._super(a);return b.style.fontSize=".8rem",b}}),a.jsoneditor.themes.foundation5=a.jsoneditor.themes.foundation.extend({getFormInputDescription:function(a){var b=this._super(a);return b.style.fontSize=".8rem",b},getButton:function(a,b,c){var d=this._super(a,b,c);return d.className=d.className.replace(/\s*small/g,"")+" tiny",d},getTabHolder:function(){var a=document.createElement("div");return a.innerHTML="<dl class='tabs vertical'></dl><div class='tabs-content'></div>",a},getTab:function(a){var b=document.createElement("dd"),c=document.createElement("a");return c.setAttribute("href","#"),c.appendChild(a),b.appendChild(c),b},getTabContentHolder:function(a){return a.children[1]},getTabContent:function(){var a=document.createElement("div");return a.className="content active",a.style.paddingLeft="5px",a},markTabActive:function(a){a.className+=" active"},markTabInactive:function(a){a.className=a.className.replace(/\s*active/g,"")},addTab:function(a,b){a.children[0].appendChild(b)}}),a.jsoneditor.themes.html=a.jsoneditor.AbstractTheme.extend({getFormInputLabel:function(a){var b=this._super(a);return this.applyStyles(b,{display:"block",marginBottom:"3px"}),b},getFormInputDescription:function(a){var b=this._super(a);return this.applyStyles(b,{fontSize:".8em",margin:0,display:"inline-block",fontStyle:"italic"}),b},getIndentedPanel:function(){var a=this._super();return this.applyStyles(a,{border:"1px solid #ddd",padding:"5px",margin:"5px",borderRadius:"3px"}),a},getChildEditorHolder:function(){var a=this._super();return this.applyStyles(a,{marginBottom:"8px"}),a},getHeaderButtonHolder:function(){var a=this.getButtonHolder();return this.applyStyles(a,{display:"inline-block",marginLeft:"10px",fontSize:".8em",verticalAlign:"middle"}),a},getTable:function(){var a=this._super();return this.applyStyles(a,{borderBottom:"1px solid #ccc",marginBottom:"5px"}),a},addInputError:function(a,b){if(a.style.borderColor="red",a.errmsg)a.errmsg.style.display="block";else{var c=this.closest(a,".form-control");a.errmsg=document.createElement("div"),a.errmsg.setAttribute("class","errmsg"),a.errmsg.style=a.errmsg.style||{},a.errmsg.style.color="red",c.appendChild(a.errmsg)}a.errmsg.innerHTML="",a.errmsg.appendChild(document.createTextNode(b))},removeInputError:function(a){a.style.borderColor="",a.errmsg&&(a.errmsg.style.display="none")}}),a.jsoneditor.themes.jqueryui=a.jsoneditor.AbstractTheme.extend({getTable:function(){return a("<table>").attr("cellpadding",5).attr("cellspacing",0)},getTableHeaderCell:function(){return a("<th>").addClass("ui-state-active").css({fontWeight:"bold"})},getTableCell:function(){return a("<td>").addClass("ui-widget-content")},getHeaderButtonHolder:function(){return this.getButtonHolder().css({marginLeft:10,fontSize:".6em",display:"inline-block"})},getFormInputDescription:function(a){return this.getDescription(a).css({display:"inline-block",marginLeft:10})},getFormControl:function(b,c,d){return a("<div>").addClass("form-control").css({padding:"8px 0"}).append(b).append(c).append(d)},getDescription:function(b){return a("<span>").css({fontSize:".8em",fontStyle:"italic"}).text(b)},getButtonHolder:function(){return a("<div>").addClass("ui-buttonset").css({fontSize:".7em"})},getFormInputLabel:function(b){return a("<label>").text(b).css({marginRight:"5px"})},getButton:function(b,c,d){var e=a("<button>").addClass("ui-button ui-widget ui-state-default ui-corner-all");return c&&!b?e.addClass("ui-button-icon-only").append(c.addClass("ui-button-icon-primary ui-icon-primary")):c?e.addClass("ui-button-text-icon-primary").append(c.addClass("ui-button-icon-primary ui-icon-primary")):e.addClass("ui-button-text-only"),e.append(a("<span>").addClass("ui-button-text").text(b||d||".")),e.attr("title",d),e},setButtonText:function(b,c,d,e){b.empty(),d&&!c?b.removeClass("ui-button-text-icon-primary").removeClass("ui-button-text-only").addClass("ui-button-icon-only").append(d.addClass("ui-button-icon-primary ui-icon-primary")):d?b.removeClass("ui-button-icon-only").removeClass("ui-button-text-only").addClass("ui-button-text-icon-primary").append(d.addClass("ui-button-icon-primary ui-icon-primary")):b.removeClass("ui-button-icon-only").removeClass("ui-button-text-icon-primary").addClass("ui-button-text-only"),b.append(a("<span>").addClass("ui-button-text").text(c||e||".")),b.attr("title",e)},getIndentedPanel:function(){return a("<div>").addClass("ui-widget-content ui-corner-all").css({padding:"1em 1.4em"})},addInputError:function(b,c){var d=b.closest(".form-control"),e=a(".errormsg",d);e.length||(e=a("<div class='errormsg ui-state-error'>").appendTo(d)),e.text(c)},removeInputError:function(b){a(".errormsg",b.closest(".form-control")).remove()},markTabActive:function(a){a.removeClass("ui-widget-header").addClass("ui-state-active")},markTabInactive:function(a){a.removeClass("ui-state-active").addClass("ui-widget-header")}}),a.jsoneditor.AbstractIconLib=b.extend({mapping:{collapse:"",expand:"","delete":"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},icon_prefix:"",getIconClass:function(a){return this.mapping[a]?this.icon_prefix+this.mapping[a]:null},getIcon:function(a){var b=this.getIconClass(a);if(!b)return null;var c=document.createElement("i");return c.className=b,c}}),a.jsoneditor.iconlibs.bootstrap2=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-up","delete":"trash",edit:"pencil",add:"plus",cancel:"ban-circle",save:"ok",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),a.jsoneditor.iconlibs.bootstrap3=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"glyphicon glyphicon-"}),a.jsoneditor.iconlibs.fontawesome3=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"ban-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),a.jsoneditor.iconlibs.fontawesome4=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"caret-square-o-down",expand:"caret-square-o-right","delete":"times",edit:"pencil",add:"plus",cancel:"ban",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fa fa-"}),a.jsoneditor.iconlibs.foundation2=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"remove",edit:"edit",add:"add-doc",cancel:"error",save:"checkmark",moveup:"up-arrow",movedown:"down-arrow"},icon_prefix:"foundicon-"}),a.jsoneditor.iconlibs.foundation3=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"x",edit:"pencil",add:"page-add",cancel:"x-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fi-"}),a.jsoneditor.iconlibs.jqueryui=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"triangle-1-s",expand:"triangle-1-e","delete":"trash",edit:"pencil",add:"plusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",movedown:"arrowthick-1-s"},icon_prefix:"ui-icon ui-icon-"}),a.jsoneditor.templates.default=function(){var a=function(b){var e={};return d(b,function(b,f){if("object"==typeof f&&null!==f){var g={};d(f,function(a,c){g[b+"."+a]=c}),c(e,a(g))}else e[b]=f}),e};return{compile:function(b){return function(c){var e=a(c),f=b+"";return d(e,function(a,b){f=f.replace(new RegExp("{{\\s*"+a+"\\s*}}","g"),b)}),f}}}},a.jsoneditor.templates.ejs=function(){return window.EJS?{compile:function(a){var b=new EJS({text:a});return function(a){return b.render(a)}}}:!1},a.jsoneditor.templates.handlebars=function(){return window.Handlebars},a.jsoneditor.templates.hogan=function(){return window.Hogan?{compile:function(a){var b=Hogan.compile(a);return function(a){return b.render(a)}}}:!1},a.jsoneditor.templates.markup=function(){return window.Mark&&window.Mark.up?{compile:function(a){return function(b){return Mark.up(a,b)}}}:!1},a.jsoneditor.templates.mustache=function(){return window.Mustache?{compile:function(a){return function(b){return Mustache.render(a,b)}}}:!1},a.jsoneditor.templates.swig=function(){return window.swig},a.jsoneditor.templates.underscore=function(){return window._?{compile:function(a){return function(b){return _.template(a,b)}}}:!1},a.jsoneditor.theme="html",a.jsoneditor.template="default",a.jsoneditor.resolvers.unshift(function(){return"multiple"}),a.jsoneditor.resolvers.unshift(function(a){return"string"==typeof a.type?a.type:void 0}),a.jsoneditor.resolvers.unshift(function(a){return"boolean"===a.type?"select":void 0}),a.jsoneditor.resolvers.unshift(function(a){return"any"===a.type?"multiple":void 0}),a.jsoneditor.resolvers.unshift(function(a){return"array"==a.type&&"table"==a.format?"table":void 0}),a.jsoneditor.resolvers.unshift(function(a){if(a.enum){if("array"===a.type||"object"===a.type)return"enum";if("number"===a.type||"integer"===a.type||"string"===a.type)return"select"}}),a.jsoneditor.resolvers.unshift(function(a){return a.oneOf?"multiple":void 0})}(window.jQuery||window.Zepto);