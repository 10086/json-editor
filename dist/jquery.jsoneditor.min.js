/*! JSON Editor v0.4.45 - JSON Schema -> HTML Editor
 * By Jeremy Dorn - https://github.com/jdorn/json-editor/
 * Released under the MIT license
 *
 * Date: 2014-03-14
 */
!function(a){var b;!function(){var a=!1,c=/xyz/.test(function(){})?/\b_super\b/:/.*/;b=function(){},b.extend=function(b){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in b)f[g]="function"==typeof b[g]&&"function"==typeof e[g]&&c.test(b[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,b[g]):b[g];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,d}}(),a.fn.jsoneditor=function(b){var c,d=a(this);if("value"===b){if(c=d.data("jsoneditor"),!c)throw"JSON Editor must be instantiated before getting or setting the value";if(!c.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before getting/setting the value";return arguments.length>1?(c.root.setValue(arguments[1]),this):c.root.getValue()}if("destroy"===b){if(c=d.data("jsoneditor"),!c)return this;if(!c.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before destroying";return c.schema=null,c.options=null,c.root.destroy(),c=null,d.data("jsoneditor",null),d.empty(),this}if("validate"===b){if(c=d.data("jsoneditor"),!c)throw"JSON Editor must be instantiated before trying to validate";if(!c.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before running validation";return arguments.length>1?c.validator.validate(arguments[1]):c.validation_results}b=b||{};var e=b.schema,f=b.startval,g=a.jsoneditor.themes[b.theme||a.jsoneditor.theme];if(!g)throw"Unknown theme "+(b.theme||a.jsoneditor.theme);c={schema:e,options:b,refs:{},theme:new g,template:b.template,ready:!1};var h=a.jsoneditor.iconlibs[b.iconlib||a.jsoneditor.iconlib];return h&&(c.iconlib=new h),d.data("jsoneditor",c),c.root_container=c.theme.getContainer().appendTo(d),c.root_container.on("change",function(a){return c.ready?(c.validation_results=c.validator.validate(c.root.getValue()),c.root.showValidationErrors(c.validation_results),void 0):(a.preventDefault(),a.stopPropagation(),!1)}),c.validator=new a.jsoneditor.Validator(e,{ajax:b.ajax,refs:b.refs,no_additional_properties:b.no_additional_properties,required_by_default:b.required_by_default}),c.validator.ready(function(b){if(!c.ready){c.schema=b;var e=a.jsoneditor.getEditorClass(c.schema);c.root=new e({jsoneditor:d,schema:c.schema,container:c.root_container,required:!0}),f&&c.root.setValue(f),c.validation_results=c.validator.validate(c.root.getValue()),c.root.showValidationErrors(c.validation_results),c.ready=!0,window.setTimeout(function(){d.trigger("ready"),d.trigger("change")})}}),this},a.jsoneditor={template:null,theme:null,iconlib:null,editors:{},templates:{},themes:{},iconlibs:{},resolvers:[],custom_validators:[],getEditorClass:function(b){var c;if(a.each(a.jsoneditor.resolvers,function(d,e){var f;return(f=e(b))&&a.jsoneditor.editors[f]?(c=f,!1):void 0}),!c)throw"Unknown editor for schema "+JSON.stringify(b);if(!a.jsoneditor.editors[c])throw"Unknown editor "+c;return a.jsoneditor.editors[c]},compileTemplate:function(b,c){c=c||a.jsoneditor.template;var d;if("string"==typeof c){if(!a.jsoneditor.templates[c])throw"Unknown template engine "+c;if(d=a.jsoneditor.templates[c](),!d)throw"Template engine "+c+" missing required library."}else d=c;if(!d)throw"No template engine set";if(!d.compile)throw"Invalid template engine set";return d.compile(b)}},a.jsoneditor.Validator=b.extend({init:function(a,b){this.original_schema=a,this.options=b||{},this.refs=this.options.refs||{},this.ready_callbacks=[],this.options.ready&&this.ready(this.options.ready),this.getRefs()},ready:function(a){return this.is_ready?a.apply(self,[this.expanded]):this.ready_callbacks.push(a),this},getRefs:function(){var b=this;this._getRefs(this.original_schema,function(c){b.schema=c,b.expanded=b.expandSchema(b.schema),b.is_ready=!0,a.each(b.ready_callbacks,function(a,c){c.apply(b,[b.expanded])})})},_getRefs:function(b,c){var d,e,f,g,h=this,i=b===this.original_schema;if(b=a.extend(!0,{},b),i&&b.definitions){var j=b.definitions;delete b.definitions,d=e=0,f=function(a){if(e>=d){if(g)return;g=!0,h._getRefs(a,c)}},a.each(j,function(){d++}),d?a.each(j,function(a,c){h._getRefs(c,function(c){h.refs["#/definitions/"+a]=c,e++,f(b)})}):f(b)}else if(b.$ref){var k=b.$ref;if(delete b.$ref,h.refs[k]&&h.refs[k]instanceof Array)h.refs[k].push(function(){b=a.extend(!0,{},b,h.refs[k],b),c(b)});else if(h.refs[k])b=a.extend(!0,{},b,h.refs[k],b),c(b);else{if(!h.options.ajax)throw"Must set ajax option to true to load external url "+k;a.getJSON(k,function(d){h.refs[k]=[],h._getRefs(d,function(d){var e=h.refs[k];h.refs[k]=d,b=a.extend(!0,{},b,h.refs[k],b),c(b),a.each(e,function(a,b){b()})})}).fail(function(){throw"Failed to fetch ref via ajax- "+k})}}else d=e=0,f=function(a){if(e>=d){if(g)return;g=!0,c(a)}},a.each(b,function(b,c){"object"==typeof c&&c&&c instanceof Array?a.each(c,function(a,b){"object"!=typeof b||!b||b instanceof Array||d++}):"object"==typeof c&&c&&d++}),d?a.each(b,function(c,d){"object"==typeof d&&d&&d instanceof Array?a.each(d,function(a,d){"object"!=typeof d||!d||d instanceof Array||h._getRefs(d,function(d){b[c][a]=d,e++,f(b)})}):"object"==typeof d&&d&&h._getRefs(d,function(a){b[c]=a,e++,f(b)})}):f(b)},validate:function(a){return this._validateSchema(this.schema,a)},_validateSchema:function(b,c,d){var e,f,g,h=[],i=JSON.stringify(c);if(d=d||"root",b=a.extend(!0,{},b),b.required&&b.required===!0){if("undefined"==typeof c)return h.push({path:d,property:"required",message:"Property must be set"}),h}else if("undefined"==typeof c){if(!this.options.required_by_default)return h;h.push({path:d,property:"required",message:"Property must be set"})}if(b.enum){for(e=!1,f=0;f<b.enum.length;f++)i===JSON.stringify(b.enum[f])&&(e=!0);e||h.push({path:d,property:"enum",message:"Value must be one of the enumerated values"})}if(b.extends)for(f=0;f<b.extends.length;f++)h=h.concat(this._validateSchema(b.extends[f],c,d));if(b.allOf)for(f=0;f<b.allOf.length;f++)h=h.concat(this._validateSchema(b.allOf[f],c,d));if(b.anyOf){for(e=!1,f=0;f<b.anyOf.length;f++)if(!this._validateSchema(b.anyOf[f],c,d).length){e=!0;break}e||h.push({path:d,property:"anyOf",message:"Value must validate against at least one of the provided schemas"})}if(b.oneOf){e=0;var j=[];for(f=0;f<b.oneOf.length;f++){var k=this._validateSchema(b.oneOf[f],c,d);k.length||e++;for(var g=0;g<k.length;g++)k[g].path=d+".oneOf["+f+"]"+k[g].path.substr(d.length);j=j.concat(k)}1!==e&&(h.push({path:d,property:"oneOf",message:"Value must validate against exactly one of the provided schemas. It currently validates against "+e+" of the schemas."}),h=h.concat(j))}if(b.not&&(this._validateSchema(b.not,c,d).length||h.push({path:d,property:"not",message:"Value must not validate against the provided schema"})),b.type)if(b.type instanceof Array){for(e=!1,f=0;f<b.type.length;f++)if(this._checkType(b.type[f],c)){e=!0;break}e||h.push({path:d,property:"type",message:"Value must be one of the provided types"})}else this._checkType(b.type,c)||h.push({path:d,property:"type",message:"Value must be of type "+b.type});if(b.disallow)if(b.disallow instanceof Array){for(e=!0,f=0;f<b.disallow.length;f++)if(this._checkType(b.disallow[f],c)){e=!1;break}e||h.push({path:d,property:"disallow",message:"Value must not be one of the provided disallowed types"})}else this._checkType(b.disallow,c)&&h.push({path:d,property:"disallow",message:"Value must not be of type "+b.disallow});if("number"==typeof c)(b.multipleOf||b.divisibleBy)&&(e=c/(b.multipleOf||b.divisibleBy),e!==Math.floor(e)&&h.push({path:d,property:b.multipleOf?"multipleOf":"divisibleBy",message:"Value must be a multiple of "+(b.multipleOf||b.divisibleBy)})),b.maximum&&(b.exclusiveMaximum&&c>=b.maximum?h.push({path:d,property:"maximum",message:"Value must be less than "+b.maximum}):!b.exclusiveMaximum&&c>b.maximum&&h.push({path:d,property:"maximum",message:"Value must be at most "+b.maximum})),b.minimum&&(b.exclusiveMinimum&&c<=b.minimum?h.push({path:d,property:"minimum",message:"Value must be greater than "+b.minimum}):!b.exclusiveMinimum&&c<b.minimum&&h.push({path:d,property:"minimum",message:"Value must be at least "+b.minimum}));else if("string"==typeof c)b.maxLength&&(c+"").length>b.maxLength&&h.push({path:d,property:"maxLength",message:"Value must be at most "+b.maxLength+" characters long"}),b.minLength&&(c+"").length<b.minLength&&h.push({path:d,property:"minLength",message:"Value must be at least "+b.minLength+" characters long"}),b.pattern&&(new RegExp(b.pattern).test(c)||h.push({path:d,property:"pattern",message:"Value must match the provided pattern"}));else if("object"==typeof c&&null!==c&&c instanceof Array){if(b.items)if(b.items instanceof Array)for(f=0;f<c.length;f++)if(b.items[f])h=h.concat(this._validateSchema(b.items[f],c[f],d+"."+f));else{if(b.additionalItems===!0)break;if(!b.additionalItems){if(b.additionalItems===!1){h.push({path:d,property:"additionalItems",message:"No additional items allowed in this array"});break}break}h=h.concat(this._validateSchema(b.additionalItems,c[f],d+"."+f))}else for(f=0;f<c.length;f++)h=h.concat(this._validateSchema(b.items,c[f],d+"."+f));if(b.maxItems&&c.length>b.maxItems&&h.push({path:d,property:"maxItems",message:"Value must have at most "+b.maxItems+" items"}),b.minItems&&c.length<b.minItems&&h.push({path:d,property:"minItems",message:"Value must have at least "+b.minItems+" items"}),b.uniqueItems){var l={};for(f=0;f<c.length;f++){if(e=JSON.stringify(c[f]),l[e]){h.push({path:d,property:"uniqueItems",message:"Array must have unique items"});break}l[e]=!0}}}else if("object"==typeof c&&null!==c){if(b.maxProperties){e=0;for(f in c)c.hasOwnProperty(f)&&e++;e>b.maxProperties&&h.push({path:d,property:"maxProperties",message:"Object must have at most "+b.maxProperties+" properties"})}if(b.minProperties){e=0;for(f in c)c.hasOwnProperty(f)&&e++;e<b.minProperties&&h.push({path:d,property:"minProperties",message:"Object must have at least "+b.minProperties+" properties"})}if(b.required&&b.required instanceof Array)for(f=0;f<b.required.length;f++)"undefined"==typeof c[b.required[f]]&&h.push({path:d,property:"required",message:"Object is missing the required property "+b.required[f]});var m={};if(b.properties)for(f in b.properties)b.properties.hasOwnProperty(f)&&(m[f]=!0,h=h.concat(this._validateSchema(b.properties[f],c[f],d+"."+f)));if(b.patternProperties)for(f in b.patternProperties)if(b.patternProperties.hasOwnProperty(f)){var n=new RegExp(f);for(g in c)c.hasOwnProperty(g)&&n.test(g)&&(m[g]=!0,h=h.concat(this._validateSchema(b.patternProperties[f],c[g],d+"."+g)))}if("undefined"!=typeof b.additionalProperties||!this.options.no_additional_properties||b.oneOf||b.anyOf||(b.additionalProperties=!1),"undefined"!=typeof b.additionalProperties)for(f in c)if(c.hasOwnProperty(f)&&!m[f]){if(!b.additionalProperties){h.push({path:d,property:"additionalProperties",message:"No additional properties allowed, but property "+f+" is set"});break}if(b.additionalProperties===!0)break;h=h.concat(this._validateSchema(b.additionalProperties,c[f],d+"."+f))}if(b.dependencies)for(f in b.dependencies)if(b.dependencies.hasOwnProperty(f)&&"undefined"!=typeof c[f])if(b.dependencies[f]instanceof Array)for(g=0;g<b.dependencies[f].length;g++)"undefined"==typeof c[b.dependencies[f][g]]&&h.push({path:d,property:"dependencies",message:"Must have property "+b.dependencies[f][g]});else h=h.concat(this._validateSchema(b.dependencies[f],c,d))}return a.each(a.jsoneditor.custom_validators,function(a,e){h=h.concat(e(b,c,d))}),h},_checkType:function(a,b){return"string"==typeof a?"string"===a?"string"==typeof b:"number"===a?"number"==typeof b:"integer"===a?"number"==typeof b&&b===Math.floor(b):"boolean"===a?"boolean"==typeof b:"array"===a?b instanceof Array:"object"===a?null!==b&&!(b instanceof Array)&&"object"==typeof b:"null"===a?null===b:!0:!this._validateSchema(a,b).length},expandSchema:function(b){var c,d=this,e=b;if("object"==typeof b.type&&(b.type instanceof Array?a.each(b.type,function(a,c){"object"==typeof c&&(b.type[a]=d.expandSchema(c))}):b.type=d.expandSchema(b.type)),"object"==typeof b.disallow&&(b.disallow instanceof Array?a.each(b.disallow,function(a,c){"object"==typeof c&&(b.disallow[a]=d.expandSchema(c))}):b.disallow=d.expandSchema(b.disallow)),b.anyOf&&a.each(b.anyOf,function(a,c){b.anyOf[a]=d.expandSchema(c)}),b.dependencies&&a.each(b.dependencies,function(a,c){"object"!=typeof c||c instanceof Array||(b.dependencies[a]=d.expandSchema(c))}),b.items&&(b.items instanceof Array?a.each(b.items,function(a,c){"object"==typeof c&&(b.items[a]=d.expandSchema(c))}):b.items=d.expandSchema(b.items)),b.properties&&a.each(b.properties,function(a,c){"object"!=typeof c||c instanceof Array||(b.properties[a]=d.expandSchema(c))}),b.patternProperties&&a.each(b.patternProperties,function(a,c){"object"!=typeof c||c instanceof Array||(b.patternProperties[a]=d.expandSchema(c))}),b.not&&(b.not=this.expandSchema(b.not)),b.additionalProperties&&"object"==typeof b.additionalProperties&&(b.additionalProperties=d.expandSchema(b.additionalProperties)),b.additionalItems&&"object"==typeof b.additionalItems&&(b.additionalItems=d.expandSchema(b.additionalItems)),b.allOf){for(c=0;c<b.allOf.length;c++)e=this.extend(e,this.expandSchema(b.allOf[c]));delete e.allOf}if(b.extends){if(b.extends instanceof Array)for(c=0;c<b.extends.length;c++)e=this.extend(e,this.expandSchema(b.extends[c]));else e=this.extend(e,this.expandSchema(b.extends));delete e.extends}if(b.oneOf){var f=a.extend(!0,{},e);for(delete f.oneOf,c=0;c<b.oneOf.length;c++)e.oneOf[c]=this.extend(this.expandSchema(b.oneOf[c]),f)}return e},extend:function(b,c){b=a.extend(!0,{},b),c=a.extend(!0,{},c);var d=this,e={};return a.each(b,function(a,b){"undefined"!=typeof c[a]?"required"===a&&"object"==typeof b&&b instanceof Array?e.required=b.concat(c[a]).reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[]):"type"===a?("object"!=typeof b&&(b=[b]),"object"!=typeof c.type&&(c.type=[c.type]),e.type=b.filter(function(a){return-1!==c.type.indexOf(a)}),1===e.type.length&&"string"==typeof e.type[0]&&(e.type=e.type[0])):e[a]="object"==typeof b&&b instanceof Array?b.filter(function(b){return-1!==c[a].indexOf(b)}):"object"==typeof b&&null!==b?d.extend(b,c[a]):b:e[a]=b}),a.each(c,function(a,c){"undefined"==typeof b[a]&&(e[a]=c)}),e}}),a.jsoneditor.AbstractEditor=b.extend({init:function(b){var c=this;this.container=b.container,this.jsoneditor=b.jsoneditor,this.theme=this.jsoneditor.data("jsoneditor").theme,this.template_engine=this.jsoneditor.data("jsoneditor").template,this.iconlib=this.jsoneditor.data("jsoneditor").iconlib,this.options=a.extend(!0,{},this.options||{},b.schema.options||{},b),this.schema=this.options.schema,b.path||this.schema.id||(this.schema.id="root"),this.path=b.path||"root",this.schema.id&&this.container.attr("data-schemaid",this.schema.id),this.schema.type&&"string"==typeof this.schema.type&&this.container.attr("data-schematype",this.schema.type),this.container.attr("data-schemapath",this.path),this.container.data("editor",this),this.key=this.path.split(".").pop(),this.parent=b.parent,this.isRequired()||this.options.compact||(this.title_links=this.theme.getFloatRightLinkHolder().appendTo(this.container),this.addremove=this.theme.getLink("remove "+this.getTitle()).appendTo(this.title_links),this.addremove.on("click",function(){return c.property_removed?c.addProperty():c.removeProperty(),c.container.trigger("change"),!1})),this.container.on("change set",function(){c.watch_listener()}),this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener_firing=!1,this.watch_listener=function(){c.watch_listener_firing||(c.watch_listener_firing=!0,window.requestAnimationFrame(function(){c.watch_listener_firing=!1,c.refreshWatchedFieldValues()&&c.onWatchedFieldChange()}))},this.schema.watch&&a.each(this.schema.watch,function(a,b){var d;b instanceof Array?d=[b[0]].concat(b[1].split(".")):(d=b.split("."),c.container.closest('[data-schemaid="'+d[0]+'"]').length||d.unshift("#"));var e=d.shift();"#"===e&&(e=c.jsoneditor.data("jsoneditor").schema.id||"root");var f=c.container.closest('[data-schemaid="'+e+'"]');if(!f.length)throw"Could not find ancestor node with id "+e;var g=f.data("editor").path+"."+d.join(".");c.watched[a]={root:f,path:d,adjusted_path:g},f.on("change",c.watch_listener),f.on("set",c.watch_listener)}),this.schema.headerTemplate&&(this.header_template=a.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine)),this.build(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.watch_listener()},getButton:function(a,b,c){return b=this.iconlib?this.iconlib.getIcon(b):null,!b&&c&&(a=c,c=null),this.theme.getButton(a,b,c)},setButtonText:function(a,b,c,d){return c=this.iconlib?this.iconlib.getIcon(c):null,!c&&d&&(b=d,d=null),this.theme.setButtonText(a,b,c,d)},refreshWatchedFieldValues:function(){if(this.watched_values){var b={},c=!1,d=this;return this.watched&&a.each(this.watched,function(a,e){for(var f=e.root.data("editor").getValue(),g=-1,h=null;;){if(g++,g>=e.path.length){h=f;break}if(!f||"undefined"==typeof f[e.path[g]])break;f=f[e.path[g]]}d.watched_values[a]!==h&&(c=!0),b[a]=h}),b.self=this.getValue(),this.watched_values.self!==b.self&&(c=!0),this.watched_values=b,c}},getWatchedFieldValues:function(){return this.watched_values},updateHeaderText:function(){this.header&&this.header.text(this.getHeaderText())},getHeaderText:function(a){return this.header_text?this.header_text:a?this.schema.title:this.getTitle()},onWatchedFieldChange:function(){if(this.header_template){var b=a.extend(!0,this.getWatchedFieldValues(),{key:this.key,i:this.key,title:this.getTitle()}),c=this.header_template(b);c!==this.header_text&&(this.header_text=c,this.updateHeaderText(),this.container.trigger("change_header_text"))}},addProperty:function(){this.property_removed=!1,this.addremove.text("remove "+this.getTitle())},removeProperty:function(){this.property_removed=!0,this.addremove.text("add "+this.getTitle())},build:function(){},isValid:function(a){a()},setValue:function(a){this.value=a},getValue:function(){return this.value},refreshValue:function(){},getChildEditors:function(){return!1},destroy:function(){var b=this;a.each(this.watched,function(a,c){c.root.off("change",b.watch_listener),c.root.off("set",b.watch_listener)}),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null},isRequired:function(){return"undefined"!=typeof this.options.required?this.options.required:"boolean"==typeof this.schema.required?this.schema.required:this.jsoneditor.data("jsoneditor").options.required_by_default?!0:!1},getDefault:function(){return this.schema.default||null},getTheme:function(){return this.theme},getSchema:function(){return this.schema},getContainer:function(){return this.container},getTitle:function(){return this.schema.title||this.key},getPath:function(){return this.path},getParent:function(){return this.parent},getOption:function(a,b){return"undefined"!=typeof this.options[a]?this.options[a]:b},getDisplayText:function(b){var c=[],d={};a.each(b,function(a,b){b.title&&(d[b.title]=d[b.title]||0,d[b.title]++),b.description&&(d[b.description]=d[b.description]||0,d[b.description]++),b.format&&(d[b.format]=d[b.format]||0,d[b.format]++),b.type&&(d[b.type]=d[b.type]||0,d[b.type]++)}),a.each(b,function(a,b){var e;e="string"==typeof b?b:b.title&&d[b.title]<=1?b.title:b.format&&d[b.format]<=1?b.format:b.type&&d[b.type]<=1?b.type:b.description&&d[b.description]<=1?b.descripton:b.title?b.title:b.format?b.format:b.type?b.type:b.description?b.description:JSON.stringify(b).length<50?JSON.stringify(b):"type",c.push(e)});var e={};return a.each(c,function(a,b){e[b]=e[b]||0,e[b]++,d[b]>1&&(c[a]=b+" "+e[b])}),c},showValidationErrors:function(){}}),a.jsoneditor.editors.null=a.jsoneditor.AbstractEditor.extend({getValue:function(){return null},setValue:function(){this.container.trigger("set")}}),a.jsoneditor.editors.string=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return this.schema.default||""},setValue:function(a,b,c){if(a=a||"","object"==typeof a&&(a=JSON.stringify(a)),"string"!=typeof a&&(a=""+a),a!==this.serialized){!c&&a&&(this.last_set=a);var d=this.sanitize(a);this.select_options&&this.select_options.indexOf(d)<0&&(d=this.select_options[0]),this.input.val(d),this.sceditor_instance&&this.sceditor_instance.val(d),this.epiceditor&&this.epiceditor.importFile(null,d),this.refreshValue(),(this.getValue()!==a||c)&&this.container.trigger("change"),this.container.trigger("set")}},removeProperty:function(){this._super(),this.input.hide(500),this.description&&this.description.hide(500),this.theme.disableLabel(this.label)},addProperty:function(){this._super(),this.input.show(500),this.description&&this.description.show(500),this.theme.enableLabel(this.label)},build:function(){var b=this;if(this.getOption("compact",!1)||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.schema.enum)this.input_type="select",this.select_options=this.schema.enum,this.input=this.theme.getSelectInput(this.select_options);else if(this.schema.enumSource)this.input_type="select",this.input=this.theme.getSelectInput([]),this.schema.enumValue&&(this.select_template=a.jsoneditor.compileTemplate(this.schema.enumValue,this.template_engine));else if(this.schema.format)if("textarea"===this.schema.format)this.input_type="textarea",this.input=this.theme.getTextareaInput();else if("html"===this.schema.format||"bbcode"===this.schema.format)this.input_type=this.schema.format,this.input=this.theme.getTextareaInput();else if("markdown"===this.schema.format)this.input_type="markdown",this.input=this.theme.getTextareaInput();else if("range"===this.schema.format){this.input_type="range";var c=this.schema.minimum||0,d=this.schema.maximum||Math.max(100,c+1),e=1;this.schema.multipleOf&&(c%this.schema.multipleOf&&(c=Math.ceil(c/this.schema.multipleOf)*this.schema.multipleOf),d%this.schema.multipleOf&&(d=Math.floor(d/this.schema.multipleOf)*this.schema.multipleOf),e=this.schema.multipleOf),this.input=this.theme.getRangeInput(c,d,e)}else this.input_type=this.schema.format,this.input=this.theme.getFormInputField(this.input_type);else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);"undefined"!=typeof this.schema.maxLength&&this.input.attr("maxlength",this.schema.maxLength),"undefined"!=typeof this.schema.pattern?this.input.attr("pattern",this.schema.pattern):"undefined"!=typeof this.schema.minLength&&this.input.attr("pattern",".{"+this.schema.minLength+",}"),this.getOption("compact")&&this.container.addClass("compact"),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.input.prop("disabled",!0),this.input.on("change keyup",function(c){if(c.preventDefault(),c.stopPropagation(),b.schema.template)return a(this).val(b.value),void 0;var d=a(this).val(),e=b.sanitize(d);return d!==e?(a(this).val(e).trigger("change"),void 0):(b.refreshValue(),"change"===c.type&&b.container.trigger("change"),void 0)}),this.schema.format&&this.input.attr("data-schemaformat",this.schema.format),this.control=this.getTheme().getFormControl(this.label,this.input,this.description).appendTo(this.container),"select"===this.input_type&&a.fn.select2&&this.input.select2(),window.setTimeout(function(){b.afterInputReady()}),this.schema.template?this.template=a.jsoneditor.compileTemplate(this.schema.template,this.template_engine):this.refreshValue()},afterInputReady:function(){var b=this;"html"===this.input_type||"bbcode"===this.input_type?a.fn.sceditor&&(b.input.sceditor({plugins:"html"===b.input_type?"xhtml":"bbcode",emoticonsEnabled:!1,width:"100%",height:300}),b.sceditor_instance=b.input.sceditor("instance"),b.sceditor_instance.blur(function(){var c=a("<div>"+b.sceditor_instance.val()+"</div>");a("#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf",c).remove(),b.input.val(c.html()),b.container.trigger("change")})):"markdown"===this.input_type&&window.EpicEditor&&(this.epiceditor_container=a("<div>").insertBefore(this.input),this.input.hide(),this.epiceditor=new EpicEditor({container:this.epiceditor_container.get(0),clientSideStorage:!1,basePath:"//cdnjs.cloudflare.com/ajax/libs/epiceditor/0.2.0"}),this.epiceditor.on("update",function(){var a=b.epiceditor.exportFile();b.input.val(a),b.container.trigger("change")}),this.epiceditor.load()),b.theme.afterInputReady(b.input)},refreshValue:function(){this.value=this.input.val(),"string"!=typeof this.value&&(this.value=""),this.serialized=this.value},destroy:function(){this.sceditor_instance&&this.sceditor_instance.destroy(),this.epiceditor&&this.epiceditor.unload(),this.template=null,this.input.remove(),this.label&&this.label.remove(),this.description&&this.description.remove(),this._super()},sanitize:function(a){return a},onWatchedFieldChange:function(){var b=this;if(this.template){var c=this.getWatchedFieldValues();this.setValue(this.template(c),!1,!0)}if(this.schema.enumSource){var c=this.getWatchedFieldValues(),d=[];if(!c[this.schema.enumSource])throw"Unknown enumSource "+this.schema.enumSource;a.each(c[this.schema.enumSource],function(a,c){var e;e=b.select_template?b.select_template({i:a,item:c}):c,e=""+e,-1===d.indexOf(e)&&d.push(e)}),this.theme.setSelectOptions(this.input,d),this.select_options=d,this.last_set&&-1!==d.indexOf(this.last_set)?this.setValue(this.last_set,!1,!0):-1===d.indexOf(this.getValue())&&this.setValue(d[0],!1,!0)}this._super()},showValidationErrors:function(b){var c=this,d=[];a.each(b,function(a,b){b.path===c.path&&d.push(b.message)}),d.length?this.theme.addInputError(this.input,d.join(". ")+"."):this.theme.removeInputError(this.input)}}),a.jsoneditor.editors.number=a.jsoneditor.editors.string.extend({getDefault:function(){return this.schema.default||0},sanitize:function(a){return(a+"").replace(/[^0-9\.\-]/g,"")},getValue:function(){return 1*this.value}}),a.jsoneditor.editors.integer=a.jsoneditor.editors.number.extend({sanitize:function(a){return a+="",a.replace(/[^0-9\-]/g,"")}}),a.jsoneditor.editors.object=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return a.extend(!0,{},this.schema.default||{})},getChildEditors:function(){return this.editors},addProperty:function(){this._super(),this.editor_holder.show(500),this.title_controls.show(500),this.editjson_controls.show(500),this.addproperty_controls&&this.addproperty_controls.show(500),this.theme.enableHeader(this.title)},removeProperty:function(){this._super(),this.editor_holder.hide(500),this.title_controls.hide(500),this.editjson_controls.hide(500),this.addproperty_controls&&this.addproperty_controls.hide(500),this.cancel_editjson_button.trigger("click"),this.cancel_addproperty_button&&this.cancel_addproperty_button.trigger("click"),this.theme.disableHeader(this.title)},build:function(){this.editors={};var b=this;if(this.schema.properties=this.schema.properties||{},this.getOption("table_row",!1))this.editor_holder=this.container,a.each(this.schema.properties,function(c,d){var e=a.jsoneditor.getEditorClass(d,b.jsoneditor),f=b.getTheme().getTableCell().appendTo(b.editor_holder);b.editors[c]=new e({jsoneditor:b.jsoneditor,schema:d,container:f,path:b.path+"."+c,parent:b,compact:!0})});else{if(this.getOption("table",!1))throw"Not supported yet";this.header=a("<span>").text(this.getTitle()),this.title=this.getTheme().getHeader(this.header).appendTo(this.container),this.editjson_holder=this.theme.getTextareaInput().appendTo(this.container).hide().css({height:100,width:"100%"}),this.addproperty_holder=a("<div>").appendTo(this.container).hide(),this.addproperty_input=this.theme.getFormInputField("text").appendTo(this.addproperty_holder).attr("placeholder","Property name..."),this.schema.description&&(this.description=this.getTheme().getDescription(this.schema.description).appendTo(this.container)),this.error_holder=a("<div></div>").appendTo(this.container),this.editor_holder=this.getTheme().getIndentedPanel().appendTo(this.container),a.each(this.schema.properties,function(c,d){var e,f=a.jsoneditor.getEditorClass(d,b.jsoneditor),g=b.getTheme().getChildEditorHolder().appendTo(b.editor_holder);b.schema.required&&b.schema.required instanceof Array&&(e=b.schema.required.indexOf(c)>=0),b.editors[c]=new f({jsoneditor:b.jsoneditor,schema:d,container:g,path:b.path+"."+c,parent:b,required:e})}),this.title_controls=this.getTheme().getHeaderButtonHolder().appendTo(this.title),this.editjson_controls=this.getTheme().getHeaderButtonHolder().appendTo(this.title),this.addproperty_controls=this.getTheme().getHeaderButtonHolder().appendTo(this.title),this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse").appendTo(this.title_controls).on("click",function(){b.collapsed?(b.editor_holder.show(300),b.collapsed=!1,b.setButtonText(b.toggle_button,"","collapse","Collapse")):(b.editor_holder.hide(300),b.collapsed=!0,b.setButtonText(b.toggle_button,"","expand","Expand"))}),this.options.collapsed&&this.toggle_button.trigger("click"),this.editing_json=!1,this.editjson_button=this.getButton("JSON","edit","Edit JSON").appendTo(this.editjson_controls).on("click",function(){if(b.editing_json){try{var a=JSON.parse(b.editjson_holder.val())}catch(c){return alert("Invalid JSON - "+c),!1}b.cancel_editjson_button.hide(),b.editjson_holder.hide(300),b.setButtonText(b.editjson_button,"JSON","edito","Edit JSON"),b.editing_json=!1,b.setValue(a),b.editor_holder.trigger("change")}else b.editing_json=!0,b.cancel_editjson_button.show(),b.editjson_holder.val(JSON.stringify(b.value,null,2)),b.editjson_holder.show(300),b.setButtonText(b.editjson_button,"JSON","save","Save JSON");return!1}),this.cancel_editjson_button=this.getButton("","cancel","Cancel").appendTo(this.editjson_controls).hide().on("click",function(){return b.cancel_editjson_button.hide(),b.editjson_holder.hide(300),b.setButtonText(b.editjson_button,"JSON","edit","Edit JSON"),b.editing_json=!1,!1}),this.canHaveAdditionalProperties()&&(this.adding_property=!1,this.addproperty_button=this.getButton("Property","add","Add Property").appendTo(this.addproperty_controls).on("click",function(){if(b.adding_property){var a=b.addproperty_input.val();if(b.editors[a])return alert("A property already exists with this name"),!1;b.cancel_addproperty_button.hide(),b.addproperty_holder.hide(300),b.setButtonText(b.addproperty_button,"Property","add","Add Property"),b.adding_property=!1,b.addObjectProperty(a)}else b.adding_property=!0,b.addproperty_input.val(""),b.cancel_addproperty_button.show(),b.addproperty_holder.show(300),b.setButtonText(b.addproperty_button,"Property","save","Save Property");return!1}),this.cancel_addproperty_button=this.getButton("","cancel","Cancel").appendTo(this.addproperty_controls).hide().on("click",function(){return b.cancel_addproperty_button.hide(),b.addproperty_holder.hide(300),b.setButtonText(b.addproperty_button,"Property","add","Add Property"),b.adding_property=!1,!1}))}b.editor_holder.on("change",function(){b.refreshValue()})},canHaveAdditionalProperties:function(){return this.schema.additionalProperties!==!1&&!this.jsoneditor.data("jsoneditor").options.no_additional_properties},addObjectProperty:function(b){var c=this;if(c.editors[b])return!1;var d={},e=!1;c.schema.patternProperties&&a.each(c.schema.patternProperties,function(c,f){var g=new RegExp(c);g.test(b)&&(e=!0,d=a.extend(!0,d,f))}),e||"object"!=typeof c.schema.additionalProperties||(d=a.extend(!0,d,c.schema.additionalProperties));var f=a.jsoneditor.getEditorClass(d,c.jsoneditor),g=c.getTheme().getChildEditorHolder().appendTo(c.editor_holder);c.editors[b]=new f({jsoneditor:c.jsoneditor,schema:d,container:g,path:c.path+"."+b,parent:c,required:!1}),c.editors[b].not_core=!0,g.trigger("change")},destroy:function(){a.each(this.editors,function(a,b){b.destroy()
}),this.editor_holder.empty(),this.title&&this.title.remove(),this.error_holder&&this.error_holder.remove(),this.editors=null,this.editor_holder.remove(),this.editor_holder=null,this._super()},refreshValue:function(){this.value={},this.serialized="";var b=this,c=0,d=!1,e=this.editors;a.each(this.editors,function(a,b){b.property_removed&&b.not_core&&(e={},d=!0)}),a.each(this.editors,function(a,f){if(f.addremove&&f.addremove.show(),f.property_removed){if(!f.not_core&&d)e[a]=f;else if(f.not_core){var g=f.container;f.destroy(),g.remove()}}else d&&(e[a]=f),c++,b.value[a]=f.getValue()}),this.editors=e,"undefined"!=typeof this.schema.minProperties&&c<=this.schema.minProperties&&a.each(this.editors,function(a,b){!b.property_removed&&b.addremove&&b.addremove.hide()}),"undefined"!=typeof this.schema.maxProperties&&c>=this.schema.maxProperties&&a.each(this.editors,function(a,b){b.property_removed&&b.addremove&&b.addremove.hide()})},setValue:function(b,c){if(b=b||{},("object"!=typeof b||b instanceof Array)&&(b={}),a.each(this.editors,function(a,d){if("undefined"!=typeof b[a])d.property_removed&&d.addremove&&d.addremove.trigger("click"),d.setValue(b[a],c);else{if(!c&&!d.property_removed&&!d.isRequired()&&d.addremove)return d.addremove.trigger("click"),void 0;d.setValue(d.getDefault(),c)}}),this.canHaveAdditionalProperties()){var d=this;a.each(b,function(a,b){d.editors[a]||(d.addObjectProperty(a),d.editors[a]&&d.editors[a].setValue(b,c))})}this.refreshValue(),this.container.trigger("set")},showValidationErrors:function(b){var c=this,d=[],e=[];if(a.each(b,function(a,b){b.path===c.path?d.push(b):e.push(b)}),this.error_holder)if(d.length){this.error_holder.empty().show(),a.each(d,function(a,b){c.error_holder.append(c.theme.getErrorMessage(b.message))})}else this.error_holder.hide();this.getOption("table_row")&&(d.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),a.each(this.editors,function(a,b){b.showValidationErrors(e)})}}),a.jsoneditor.editors.array=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return this.schema.default||[]},addProperty:function(){this._super(),this.row_holder.show(500),this.tabs_holder&&this.tabs_holder.show(500),this.controls.show(500),this.title_controls.show(500),this.theme.enableHeader(this.title)},removeProperty:function(){this._super(),this.row_holder.hide(500),this.tabs_holder&&this.tabs_holder.hide(500),this.controls.hide(500),this.title_controls.hide(500),this.theme.disableHeader(this.title)},build:function(){this.rows=[],this.row_cache=[];var b=this;this.getOption("compact",!1)?(this.panel=this.theme.getIndentedPanel().appendTo(this.container),this.controls=this.theme.getButtonHolder().appendTo(this.panel),this.row_holder=a("<div>").appendTo(this.panel)):(this.header=a("<span>").text(this.getTitle()),this.title=this.theme.getHeader(this.header).appendTo(this.container),this.title_controls=this.theme.getHeaderButtonHolder().appendTo(this.title),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description).appendTo(this.container)),this.error_holder=a("<div></div>").appendTo(this.container),"tabs"===this.schema.format?(this.controls=this.theme.getHeaderButtonHolder().appendTo(this.title),this.tabs_holder=this.theme.getTabHolder().appendTo(this.container),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel().appendTo(this.container),this.row_holder=a("<div>").appendTo(this.panel),this.controls=this.theme.getButtonHolder().appendTo(this.panel))),this.row_holder.on("change",function(){b.refreshValue()}),this.row_holder.on("change_header_text",function(){b.refreshTabs(!0)}),this.addControls()},getItemTitle:function(){return this.schema.items&&this.schema.items.title||"item"},getItemSchema:function(b){return this.schema.items instanceof Array?b>=this.schema.items.length?this.schema.additionalItems===!0?{}:this.schema.additionalItems?a.extend(!0,{},this.schema.additionalItems):void 0:a.extend(!0,{},this.schema.items[b]):this.schema.items?a.extend(!0,{},this.schema.items):{}},getItemInfo:function(b){var c=this.getItemSchema(b);this.item_info=this.item_info||{};var d=JSON.stringify(c);if("undefined"!=typeof this.item_info[d])return this.item_info[d];var e=a("<div>").appendTo(this.container);e.on("change set",function(a){return a.preventDefault(),a.stopPropagation(),!1});var f=a.jsoneditor.getEditorClass(c,this.jsoneditor);return f=new f({jsoneditor:this.jsoneditor,schema:c,container:e,path:this.path+"."+b,parent:this,required:!0}),this.item_info[d]={child_editors:f.getChildEditors()?!0:!1,title:c.title||"item","default":f.getDefault()},f.destroy(),e.remove(),this.item_info[d]},getElementEditor:function(b){var c=this.getItemInfo(b),d=this.getItemSchema(b);d.title=c.title+" "+b;var e,f=a.jsoneditor.getEditorClass(d,this.jsoneditor);e=this.tabs_holder?this.theme.getTabContent():c.child_editors?this.theme.getChildEditorHolder():this.theme.getIndentedPanel(),e.appendTo(this.row_holder);var g=new f({jsoneditor:this.jsoneditor,schema:d,container:e,path:this.path+"."+b,parent:this,required:!0});return g.title_controls||(g.array_controls=this.theme.getButtonHolder().appendTo(e)),g},destroy:function(){this.empty(!0),this.title&&this.title.remove(),this.description&&this.description.remove(),this.row_holder&&this.row_holder.remove(),this.controls&&this.controls.remove(),this.panel&&this.panel.remove(),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,this._super()},empty:function(b){if(this.rows){var c=this;a.each(this.rows,function(a,d){b&&(d.tab&&d.tab.remove(),c.destroyRow(d,!0),c.row_cache[a]=null),c.rows[a]=null}),c.rows=[],b&&(c.row_cache=[])}},destroyRow:function(a,b){var c=a.container;b?(a.destroy(),c.remove(),a.tab&&a.tab.remove()):(a.tab&&a.tab.hide(),c.hide())},getMax:function(){return this.schema.items instanceof Array&&0==this.schema.additionalItems?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0},refreshTabs:function(b){var c=this;a.each(this.rows,function(a,d){d.tab&&(b?d.tab_text.text(d.getHeaderText()):d.tab===c.active_tab?(c.theme.markTabActive(d.tab),d.container.show()):(c.theme.markTabInactive(d.tab),d.container.hide()))})},setValue:function(b){b=b||[],b instanceof Array||(b=[b]);var c=JSON.stringify(b);if(c!==this.serialized){if(this.schema.minItems)for(;b.length<this.schema.minItems;)b.push(this.getItemInfo(b.length).default);this.getMax()&&b.length>this.getMax()&&(b=b.slice(0,this.getMax()));var d=this;a.each(b,function(a,b){d.rows[a]?d.rows[a].setValue(b):d.row_cache[a]?(d.rows[a]=d.row_cache[a],d.rows[a].setValue(b),d.rows[a].container.show(),d.rows[a].tab&&d.rows[a].tab.show()):d.addRow(b)});for(var e=b.length;e<d.rows.length;e++)d.destroyRow(d.rows[e]),d.rows[e]=null;d.rows=d.rows.slice(0,b.length);var f=null;a.each(d.rows,function(a,b){return b.tab===d.active_tab?(f=b.tab,!1):void 0}),!f&&d.rows.length&&(f=d.rows[0].tab),d.active_tab=f,d.refreshValue(),d.refreshTabs(),d.container.trigger("set")}},refreshValue:function(){var b=this,c=this.value?this.value.length:0;if(this.value=[],a.each(this.rows,function(a,c){b.value[a]=c.getValue()}),c!==this.value.length){var d=this.schema.minItems&&this.schema.minItems>=this.rows.length;a.each(this.rows,function(a,c){a===b.rows.length-1?c.movedown_button.hide():c.movedown_button.show(),d?c.delete_button.hide():c.delete_button.show(),b.value[a]=c.getValue()}),this.value.length?1===this.value.length?(this.remove_all_rows_button.hide(),d?this.delete_last_row_button.hide():this.delete_last_row_button.show()):d?(this.delete_last_row_button.hide(),this.delete_last_row_button.hide()):(this.delete_last_row_button.show(),this.remove_all_rows_button.show()):(this.delete_last_row_button.hide(),this.remove_all_rows_button.hide()),this.getMax()&&this.getMax()<=this.rows.length?this.add_row_button.hide():this.add_row_button.show()}},addRow:function(b){var c=this,d=this.rows.length;c.rows[d]=this.getElementEditor(d),c.row_cache[d]=c.rows[d],c.tabs_holder&&(c.rows[d].tab_text=a("<span>").text(c.rows[d].getHeaderText()),c.rows[d].tab=c.theme.getTab(c.rows[d].tab_text).on("click",function(){return c.active_tab=c.rows[d].tab,c.refreshTabs(),!1}),c.theme.addTab(c.tabs_holder,c.rows[d].tab)),c.rows[d].delete_button=this.getButton(c.getItemTitle(),"delete","Delete "+c.getItemTitle()).addClass("delete").data("i",d).on("click",function(){var b=a(this).data("i"),d=c.getValue(),e=[],f=null;a.each(d,function(a,d){return a===b?(c.rows[a].tab===c.active_tab&&(c.rows[a+1]?f=c.rows[a+1].tab:a&&(f=c.rows[a-1].tab)),void 0):(e.push(d),void 0)}),c.setValue(e),f&&(c.active_tab=f,c.refreshTabs()),c.container.trigger("change")}),c.rows[d].moveup_button=this.getButton("","moveup","Move up").data("i",d).addClass("moveup").on("click",function(){var b=a(this).data("i");if(!(0>=b)){var d=c.getValue(),e=d[b-1];d[b-1]=d[b],d[b]=e,c.setValue(d),c.active_tab=c.rows[b-1].tab,c.refreshTabs(),c.container.trigger("change")}}),c.rows[d].movedown_button=this.getButton("","movedown","Move down").addClass("movedown").data("i",d).on("click",function(){var b=a(this).data("i"),d=c.getValue();if(!(b>=d.length-1)){var e=d[b+1];d[b+1]=d[b],d[b]=e,c.setValue(d),c.active_tab=c.rows[b+1].tab,c.refreshTabs(),c.container.trigger("change")}});var e=c.rows[d].title_controls||c.rows[d].array_controls;e&&(e.append(c.rows[d].delete_button),d&&e.append(c.rows[d].moveup_button),e.append(c.rows[d].movedown_button)),b&&c.rows[d].setValue(b),c.refreshTabs()},addControls:function(){var b=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse").appendTo(this.title_controls).on("click",function(){b.collapsed?(b.collapsed=!1,b.row_holder.show(300),b.tabs_holder&&b.tabs_holder.show(300),b.controls.show(300),b.setButtonText(a(this),"","collapse","Collapse")):(b.collapsed=!0,b.row_holder.hide(300),b.tabs_holder&&b.tabs_holder.hide(300),b.controls.hide(300),b.setButtonText(a(this),"","expand","Expand"))}),this.options.collapsed&&this.toggle_button.trigger("click"),this.add_row_button=this.getButton(this.getItemTitle(),"add","Add "+this.getItemTitle()).on("click",function(){var a=b.rows.length;b.row_cache[a]?(b.rows[a]=b.row_cache[a],b.rows[a].container.show(),b.rows[a].tab&&b.rows[a].tab.show()):b.addRow(),b.active_tab=b.rows[a].tab,b.refreshTabs(),b.refreshValue(),b.container.trigger("change")}).appendTo(b.controls),this.delete_last_row_button=this.getButton("Last "+this.getItemTitle(),"delete","Delete Last "+this.getItemTitle()).on("click",function(){var a=b.getValue(),c=null;b.rows.length>1&&b.rows[b.rows.length-1].tab===b.active_tab&&(c=b.rows[b.rows.length-2].tab),a.pop(),b.setValue(a),c&&(b.active_tab=c,b.refreshTabs()),b.container.trigger("change")}).appendTo(b.controls),this.remove_all_rows_button=this.getButton("All","delete","Delete All").on("click",function(){b.setValue([]),b.container.trigger("change")}).appendTo(b.controls),b.tabs&&(this.add_row_button.css({width:"100%",textAlign:"left",marginBottom:3}),this.delete_last_row_button.css({width:"100%",textAlign:"left",marginBottom:3}),this.remove_all_rows_button.css({width:"100%",textAlign:"left",marginBottom:3}),this.tabs.on("sortupdate",function(c,d){var e=d.oldindex,f=d.item.index();if(c.stopPropagation(),c.preventDefault(),e!=f){var g=b.getValue(),h=[],i=g[e],j=e>f;a.each(g,function(a,b){a!==e&&(j?(a===f&&h.push(i),h.push(b)):(h.push(b),a===f&&h.push(i)))}),d.item.detach(),e?b.row_holder.children().eq(e-1).after(d.item):b.row_holder.children().eq(0).before(d.item),b.setValue(h),b.div.trigger("change")}}))},showValidationErrors:function(b){var c=this,d=[],e=[];if(a.each(b,function(a,b){b.path===c.path?d.push(b):e.push(b)}),this.error_holder)if(d.length){this.error_holder.empty().show(),a.each(d,function(a,b){c.error_holder.append(c.theme.getErrorMessage(b.message))})}else this.error_holder.hide();a.each(this.rows,function(a,b){b.showValidationErrors(e)})}}),a.jsoneditor.editors.table=a.jsoneditor.editors.array.extend({addProperty:function(){this._super(),this.value.length&&this.table.show(500)},removeProperty:function(){this._super(),this.table.hide(500)},build:function(){this.rows=[];var b=this;this.schema.items=this.schema.items||[],this.table=this.theme.getTable().appendTo(this.container),this.thead=this.theme.getTableHead().appendTo(this.table),this.header_row=this.theme.getTableRow().appendTo(this.thead),this.row_holder=this.theme.getTableBody().appendTo(this.table);var c=this.getElementEditor(0,!0);this.item_default=c.getDefault(),this.item_title=this.schema.items.title||"row",c.getChildEditors()&&(this.item_has_child_editors=!0),this.getOption("compact",!1)?this.panel=a("<div>").appendTo(this.container):(this.title=this.theme.getHeader(this.getTitle()).appendTo(this.container),this.title_controls=this.theme.getHeaderButtonHolder().appendTo(this.title),this.panel=this.theme.getIndentedPanel().appendTo(this.container),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description).appendTo(this.panel)),this.error_holder=a("<div></div>").appendTo(this.panel)),this.table.appendTo(this.panel),this.controls=this.theme.getButtonHolder().appendTo(this.panel),this.item_has_child_editors?a.each(c.getChildEditors(),function(a,c){b.header_row.append(b.theme.getTableHeaderCell().text(c.getTitle()).attr("title",c.schema.title))}):b.header_row.append(b.theme.getTableHeaderCell().text(this.item_title)),c.destroy(),this.row_holder.empty(),b.header_row.append(b.theme.getTableHeaderCell().html("&nbsp;")),this.row_holder.on("change",function(){b.refreshValue()}),this.addControls()},getItemDefault:function(){return a.extend(!0,{},{"default":this.item_default}).default},getItemTitle:function(){return this.item_title},getElementEditor:function(b,c){var d=a.extend({},this.schema.items),e=a.jsoneditor.getEditorClass(d,this.jsoneditor),f=this.theme.getTableRow().appendTo(this.row_holder),g=this.item_has_child_editors?f:this.theme.getTableCell().appendTo(f);c&&g.on("change set",function(a){return a.preventDefault(),a.stopPropagation(),!1});var h=new e({jsoneditor:this.jsoneditor,schema:d,container:g,path:this.path+"."+b,parent:this,compact:!0,table_row:!0});return h.controls_cell=this.theme.getTableCell().appendTo(f),h.row=f,h.table_controls=this.theme.getButtonHolder().appendTo(h.controls_cell).css({margin:0,padding:0}),h},destroy:function(){this.empty(),this.title&&this.title.remove(),this.description&&this.description.remove(),this.row_holder&&this.row_holder.remove(),this.table.remove(),this.panel&&this.panel.remove(),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,this._super()},empty:function(){if(this.rows){var b=this;a.each(this.rows,function(a,c){b.item_has_child_editors||c.row.remove(),c.destroy(),b.rows[a]=null}),b.rows=[]}},setValue:function(b){if(b=b||[],this.schema.minItems)for(;b.length<this.schema.minItems;)b.push(this.getItemDefault());this.schema.maxItems&&b.length>this.schema.maxItems&&(b=b.slice(0,this.schema.maxItems));var c=JSON.stringify(b);if(c!==this.serialized){var d=!1,e=this;a.each(b,function(a,b){e.rows[a]?e.rows[a].setValue(b):(e.addRow(b),d=!0)});for(var f=b.length;f<e.rows.length;f++){var g=e.rows[f].container;e.item_has_child_editors||e.rows[f].row.remove(),e.rows[f].destroy(),g.remove(),e.rows[f]=null,d=!0}e.rows=e.rows.slice(0,b.length),e.refreshValue(),d&&e.refreshRowButtons(),e.container.trigger("set")}},refreshRowButtons:function(){var b=this,c=this.schema.minItems&&this.schema.minItems>=this.rows.length;a.each(this.rows,function(a,d){a===b.rows.length-1?d.movedown_button.hide():d.movedown_button.show(),c?d.delete_button.hide():d.delete_button.show()}),this.value.length?1===this.value.length?(this.table.show(),this.toggle_button.show(),this.remove_all_rows_button.hide(),c?this.delete_last_row_button.hide():this.delete_last_row_button.show()):(this.table.show(),this.toggle_button.show(),c?(this.delete_last_row_button.hide(),this.delete_last_row_button.hide()):(this.delete_last_row_button.show(),this.remove_all_rows_button.show())):(this.delete_last_row_button.hide(),this.remove_all_rows_button.hide(),this.toggle_button.hide(),this.table.hide()),this.schema.maxItems&&this.schema.maxItems<=this.rows.length?this.add_row_button.hide():this.add_row_button.show()},refreshValue:function(){var b=this;this.value=[],a.each(this.rows,function(a,c){b.value[a]=c.getValue()}),this.serialized=JSON.stringify(this.value)},addRow:function(b){var c=this,d=this.rows.length;c.rows[d]=this.getElementEditor(d),c.rows[d].delete_button=this.getButton("","delete","Delete").addClass("delete").data("i",d).on("click",function(){var b=a(this).data("i"),d=c.getValue(),e=[];a.each(d,function(a,c){a!==b&&e.push(c)}),c.setValue(e),c.container.trigger("change")}),c.rows[d].moveup_button=this.getButton("","moveup","Move up").data("i",d).addClass("moveup").on("click",function(){var b=a(this).data("i");if(!(0>=b)){var d=c.getValue(),e=d[b-1];d[b-1]=d[b],d[b]=e,c.setValue(d),c.container.trigger("change")}}),c.rows[d].movedown_button=this.getButton("","movedown","Move down").addClass("movedown").data("i",d).on("click",function(){var b=a(this).data("i"),d=c.getValue();if(!(b>=d.length-1)){var e=d[b+1];d[b+1]=d[b],d[b]=e,c.setValue(d),c.container.trigger("change")}});var e=c.rows[d].table_controls;e.append(c.rows[d].delete_button),d&&e.append(c.rows[d].moveup_button),e.append(c.rows[d].movedown_button),b&&c.rows[d].setValue(b)},addControls:function(){var b=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse","Collapse").appendTo(this.title_controls).on("click",function(){b.collapsed?(b.collapsed=!1,b.panel.show(300),b.setButtonText(a(this),"","collapse","Collapse")):(b.collapsed=!0,b.panel.hide(300),b.setButtonText(a(this),"","expand","Expand"))}),this.options.collapsed&&this.toggle_button.trigger("click"),this.add_row_button=this.getButton(this.getItemTitle(),"add","Add "+this.getItemTitle()).on("click",function(){b.addRow(),b.refreshValue(),b.refreshRowButtons(),b.container.trigger("change")}).appendTo(b.controls),this.delete_last_row_button=this.getButton("Last "+this.getItemTitle(),"delete","Delete Last "+this.getItemTitle()).on("click",function(){var a=b.getValue();a.pop(),b.setValue(a),b.container.trigger("change")}).appendTo(b.controls),this.remove_all_rows_button=this.getButton("All","delete","Delete All").on("click",function(){b.setValue([]),b.container.trigger("change")}).appendTo(b.controls),this.row_holder.on("sortupdate",function(c,d){var e=d.oldindex,f=d.item.index();if(c.stopPropagation(),c.preventDefault(),e!=f){var g=b.getValue(),h=[],i=g[e],j=e>f;a.each(g,function(a,b){a!==e&&(j?(a===f&&h.push(i),h.push(b)):(h.push(b),a===f&&h.push(i)))}),d.item.detach(),e?b.row_holder.children().eq(e-1).after(d.item):b.row_holder.children().eq(0).before(d.item),b.setValue(h),b.div.trigger("change")}})}}),a.jsoneditor.editors.multiple=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return null},build:function(){var b=this,c=this.getContainer();if(this.types=[],this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else{if(this.schema.type&&"any"!==this.schema.type)this.types=this.schema.type instanceof Array?this.schema.type:[this.schema.type];else if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){var d=this.schema.disallow;"object"==typeof schema.disallow&&schema.disallow instanceof Array||(d=[this.schema.disallow]);var e=[];a.each(this.types,function(a,b){-1===d.indexOf(b)&&e.push(b)}),this.types=e}delete this.schema.type}this.display_text=this.getDisplayText(this.types),this.switcher=this.theme.getSelectInput(this.display_text).appendTo(c).on("change",function(c){c.preventDefault(),c.stopPropagation(),b.type=b.display_text.indexOf(a(this).val());var d=b.getValue();return a.each(b.editors,function(a,c){b.type===a?(c.setValue(d,!0),c.container.show()):c.container.hide()}),b.container.trigger("change"),!1}).css({marginBottom:0,"float":"right"}),this.editor_holder=this.theme.getIndentedPanel().appendTo(c),this.type=0,this.editors=[],this.validators=[];var f=a("option",this.switcher),g=0;a.each(this.types,function(c,d){var e,h=b.theme.getChildEditorHolder().appendTo(b.editor_holder);"string"==typeof d?(e=a.extend(!0,{},b.schema),e.type=d):(e=a.extend(!0,{},b.schema,d),d.required&&d.required instanceof Array&&b.schema.required&&b.schema.required instanceof Array&&(e.required=b.schema.required.concat(d.required))),b.validators[c]=new a.jsoneditor.Validator(e,{required_by_default:b.jsoneditor.data("jsoneditor").options.required_by_default,no_additional_properties:b.jsoneditor.data("jsoneditor").options.no_additional_properties});var i=a.jsoneditor.getEditorClass(e,b.jsoneditor);b.editors[c]=new i({jsoneditor:b.jsoneditor,schema:e,container:h,path:b.path,parent:b.parent,required:!0}),b.editors[c].option=f.eq(g),h.on("change_header_text",function(){b.refreshHeaderText()}),c!==b.type&&h.hide(),g++}),this.editor_holder.on("change set",function(){b.refreshValue()}),this.refreshHeaderText(),this.switcher.val(this.display_text[this.type])},refreshHeaderText:function(){var b=[];a.each(this.editors,function(a,c){b.push(c.schema)});var c=this.getDisplayText(b);a.each(this.editors,function(a,b){b.option&&b.option.text(c[a])})},refreshValue:function(){this.value=this.editors[this.type].getValue()},setValue:function(b,c){var d=this;a.each(this.validators,function(a,c){return c.validate(b).length?void 0:(d.type=a,d.switcher.val(d.display_text[a]).trigger("change"),!1)}),this.editors[this.type].setValue(b,c),this.refreshValue(),this.container.trigger("set")},destroy:function(){a.each(this.editors,function(a,b){b.destroy()}),this.editor_holder.remove(),this.switcher.remove(),this._super()},showValidationErrors:function(b){var c=this;this.oneOf?a.each(this.editors,function(d,e){var f=c.path+".oneOf["+d+"]",g=[];a.each(b,function(b,d){if(d.path.substr(0,f.length)===f){var e=a.extend({},d);e.path=c.path+e.path.substr(f.length),g.push(e)}}),e.showValidationErrors(g)}):a.each(this.editors,function(a,c){c.showValidationErrors(b)})}}),a.jsoneditor.editors.enum=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return this.schema.enum[0]},addProperty:function(){this._super(),this.display_area.show(500),this.theme.enableHeader(this.title)},removeProperty:function(){this._super(),this.display_area.hide(500),this.theme.disableHeader(this.title)},build:function(){this.getContainer();this.header=a("<span>").text(this.getTitle()),this.title=this.getTheme().getHeader(this.header).appendTo(this.container),this.options.enum_titles=this.options.enum_titles||[],this.enum=this.schema.enum,this.selected=0,this.select_options=[],this.html_values=[];for(var b=this,c=0;c<this.enum.length;c++)this.select_options[c]=this.options.enum_titles[c]||"Value "+(c+1),this.html_values[c]=this.getHTML(this.enum[c]);this.switcher=this.theme.getSelectInput(this.select_options).appendTo(this.container).css({"float":"right",marginBottom:0}),this.display_area=this.theme.getIndentedPanel().appendTo(this.container),this.switcher.on("change",function(){b.selected=b.select_options.indexOf(a(this).val()),b.value=b.enum[b.selected],b.refreshValue(),b.container.trigger("change")}),this.value=this.enum[0],this.refreshValue(),1===this.enum.length&&this.switcher.hide()},refreshValue:function(){var b=this;b.selected=-1;var c=JSON.stringify(this.value);return a.each(this.enum,function(a,d){return c===JSON.stringify(d)?(b.selected=a,!1):void 0}),b.selected<0?(b.setValue(b.enum[0]),void 0):(this.switcher.val(this.select_options[this.selected]),this.display_area.empty().append(this.html_values[this.selected]),void 0)},getHTML:function(b){var c=this;if(null===b)return"<em>null</em>";if("object"==typeof b){var d;return d=b instanceof Array?a("<ol></ol>"):a("<ul></ul>"),a.each(b,function(e,f){var g=c.getHTML(f);b instanceof Array||(g=a("<div></div>").append(a("<strong></strong>").text(e)).append(": ").append(g)),d.append(a("<li></li>").append(g))}),d}return"boolean"==typeof b?b?"true":"false":b},setValue:function(a){this.value=a,this.refreshValue(),this.container.trigger("change set")},destroy:function(){this.display_area.remove(),this.title.remove(),this.switcher.remove(),this._super()}}),a.jsoneditor.editors.select=a.jsoneditor.AbstractEditor.extend({getDefault:function(){return this.schema.default||""},setValue:function(a){a=this.typecast(a||"");var b=a;this.enum_values.indexOf(b)<0&&(b=this.enum_values[0]),this.input.val(this.enum_options[this.enum_values.indexOf(b)]),this.value=b,b!==a&&this.input.trigger("change"),this.input.trigger("set")},typecast:function(a){return"boolean"===this.schema.type?!!a:"number"===this.schema.type?1*a:"integer"===this.schema.type?Math.floor(1*a):""+a},getValue:function(){return this.value},removeProperty:function(){this._super(),this.input.hide(500),this.description&&this.description.hide(500),this.theme.disableLabel(this.label)},addProperty:function(){this._super(),this.input.show(500),this.description&&this.description.show(500),this.theme.enableLabel(this.label)},build:function(){var b=this;if(this.getOption("compact",!1)||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.input_type="select",this.enum_options=[],this.enum_values=[],this.schema.enum)a.each(this.schema.enum,function(a,c){b.enum_options[a]=""+c,b.enum_values[a]=b.typecast(c)});else{if("boolean"!==this.schema.type)throw"'select' editor requires the enum property to be set.";b.enum_options=["true","false"],b.enum_values=[!0,!1]}this.getOption("compact")&&this.container.addClass("compact"),this.input=this.theme.getSelectInput(this.enum_options),(this.schema.readOnly||this.schema.readonly)&&this.input.prop("disabled",!0),this.input.attr("data-schemapath",this.path).attr("data-schematype",this.schema.type).on("change keyup",function(){var c=a(this).val(),d=c;-1===b.enum_options.indexOf(c)&&(d=b.enum_options[0]),b.value=b.enum_values[b.enum_options.indexOf(c)]}),this.control=this.getTheme().getFormControl(this.label,this.input,this.description).appendTo(this.container),this.value=this.enum_values[0],a.fn.select2&&this.enum_options.length>2&&this.input.select2(),b.theme.afterInputReady(b.input)},destroy:function(){this.label&&this.label.remove(),this.description&&this.description.remove(),this.input.remove(),this._super()}}),a.jsoneditor.AbstractTheme=b.extend({getContainer:function(){return a("<div>")},getFloatRightLinkHolder:function(){return a("<div>").css({"float":"right",marginLeft:"10px"})},getLink:function(b){return a("<a href='#'>").text(b)},disableHeader:function(a){a.css({color:"#ccc"})},disableLabel:function(a){a.css({color:"#ccc"})},enableHeader:function(a){a.css({color:""})},enableLabel:function(a){a.css({color:""})},getFormInputLabel:function(b){return a("<label>").text(b)},getCheckboxLabel:function(a){return this.getFormInputLabel(a)},getHeader:function(b){return a("<h3>").append(b)},getCheckbox:function(){return this.getFormInputField("checkbox")},getSelectInput:function(b){var c=a("<select>");return b&&this.setSelectOptions(c,b),c},setSelectOptions:function(b,c){b.empty(),a.each(c,function(c,d){b.append(a("<option>").attr("value",d).text(d))})},getTextareaInput:function(){return a("<textarea>").css({width:"100%",height:300,boxSizing:"border-box"})},getRangeInput:function(b,c,d){return a("<input type='range'>").attr("min",b).attr("max",c).attr("step",d)},getFormInputField:function(b){return a("<input type='"+b+"'>")},afterInputReady:function(){},getFormControl:function(b,c,d){return a("<div>").addClass("form-control").append(b).append(c).append(d)},getIndentedPanel:function(){return a("<div>").css({paddingLeft:10,marginLeft:10,borderLeft:"1px solid #ccc"})},getChildEditorHolder:function(){return a("<div>")},getDescription:function(b){return a("<p>").text(b)},getCheckboxDescription:function(a){return this.getDescription(a)},getFormInputDescription:function(a){return this.getDescription(a)},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){return a("<div>")},getButton:function(b,c,d){var e=a("<button>").text(b);return c&&e.prepend(" ").prepend(c),d&&e.attr("title",d),e},setButtonText:function(a,b,c,d){a.text(b),c&&a.prepend(" ").prepend(c),d&&a.attr("title",d)},getTable:function(){return a("<table></table>")},getTableRow:function(){return a("<tr></tr>")},getTableHead:function(){return a("<thead></thead>")},getTableBody:function(){return a("<tbody></tbody>")},getTableHeaderCell:function(){return a("<th></th>")},getTableCell:function(){return a("<td></td>")},getErrorMessage:function(b){return a("<p style='color: red;'></p>").text(b)},addInputError:function(){},removeInputError:function(){},addTableRowError:function(){},removeTableRowError:function(){},getTabHolder:function(){return a("<div><div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 130px;'></div></div>").append(a("<div>").css("clear","both"))},getTab:function(b){return a("<div></div>").append(b).css({border:"1px solid #ccc",borderWidth:"1px 0 1px 1px",textAlign:"center",lineHeight:"30px",borderRadius:5,borderBottomRightRadius:0,borderTopRightRadius:0,fontWeight:"bold",cursor:"pointer"})},getTabContentHolder:function(b){return a("> .content",b)},getTabControls:function(b){return a("> .controls",b)},getTabContent:function(){return this.getIndentedPanel()},markTabActive:function(a){a.css({opacity:1,background:"white"})},markTabInactive:function(a){a.css({opacity:.5,background:""})},addTab:function(b,c){a("> .tabs",b).append(c)},addTabControls:function(a,b){a.append(b)}}),a.jsoneditor.themes.bootstrap2=a.jsoneditor.AbstractTheme.extend({getRangeInput:function(a,b,c){return this._super(a,b,c)},getSelectInput:function(a){return this._super(a).css({width:"auto"})},afterInputReady:function(a){a.data("control-group")||(a.data("control-group",a.closest(".control-group")),a.data("controls",a.closest("controls")),a.closest(".compact").length&&(a.data("control-group").removeClass("control-group"),a.data("controls").removeClass("controls"),a.css("margin-bottom",0)))},getIndentedPanel:function(){return a("<div></div>").addClass("well well-small")},getFormInputDescription:function(b){return a("<p></p>").addClass("help-inline").text(b)},getFormControl:function(b,c,d){var e,f=a("<div></div>").addClass("control-group");return b&&"checkbox"===c.attr("type")?(e=a("<div></div>").addClass("controls").appendTo(f),b.addClass("checkbox").append(c).appendTo(e)):(b&&b.addClass("control-label").appendTo(f),e=a("<div></div>").addClass("controls").append(c).appendTo(f)),d&&e.append(d),f},getHeaderButtonHolder:function(){return a("<div></div>").addClass("btn-group").css({marginLeft:10})},getButtonHolder:function(){return a("<div></div>").addClass("btn-group")},getButton:function(a,b,c){return this._super(a,b,c).addClass("btn btn-default")},getTable:function(){return a("<table></table>").addClass("table table-bordered").css({width:"auto",maxWidth:"none"})},addInputError:function(b,c){if(b.data("control-group")){b.data("control-group").addClass("error");var d=b.data("errmsg");d||(d=a("<p class='help-block errormsg'>").appendTo(b.data("controls")),b.data("errmsg",d)),d.text(c)}},removeInputError:function(a){a.data("errmsg")&&(a.data("errmsg").remove(),a.data("control-group").removeClass("error"))},getTabHolder:function(){return a("<div class='tabbable tabs-left'><ul class='nav nav-tabs'></ul><div class='tab-content'></div></div>")},getTab:function(b){return a("<li></li>").append(a("<a href='#'>").append(b))},getTabContentHolder:function(b){return a("> .tab-content",b)},getTabContent:function(){return a("<div class='tab-pane active'></div>")},markTabActive:function(a){a.addClass("active")},markTabInactive:function(a){a.removeClass("active")},addTab:function(b,c){a("> .nav-tabs",b).append(c)
}}),a.jsoneditor.themes.bootstrap3=a.jsoneditor.AbstractTheme.extend({getSelectInput:function(a){return this._super(a).addClass("form-control").css({width:"auto"})},getTextareaInput:function(){return a("<textarea>").addClass("form-control")},getRangeInput:function(){return this._super()},getFormInputField:function(a){return this._super(a).addClass("form-control")},getFormControl:function(b,c,d){var e=a("<div></div>");return b&&"checkbox"===c.attr("type")?(e.addClass("checkbox"),b.append(c).appendTo(e)):(e.addClass("form-group"),b&&b.appendTo(e).addClass("control-label"),c.appendTo(e)),d&&e.append(d),e},getIndentedPanel:function(){return a("<div>").addClass("well well-sm")},getFormInputDescription:function(b){return a("<p>").addClass("help-block").text(b)},getHeaderButtonHolder:function(){return this.getButtonHolder().css({marginLeft:10})},getButtonHolder:function(){return a("<div>").addClass("btn-group")},getButton:function(a,b,c){return this._super(a,b,c).addClass("btn btn-default")},getTable:function(){return a("<table>").addClass("table table-bordered").css({width:"auto",maxWidth:"none"})},addInputError:function(b,c){var d=b.closest(".form-group").addClass("has-error"),e=a(".errormsg",d);e.length||(e=a("<p class='help-block errormsg'>").appendTo(d)),e.text(c)},removeInputError:function(b){a(".errormsg",b.closest(".form-group").removeClass("has-error")).remove()},getTabHolder:function(){var b=this._super();return a("> .tabs",b).addClass("list-group"),b},getTab:function(b){return a("<a href='#' class='list-group-item'>").append(b)},markTabActive:function(a){a.addClass("active")},markTabInactive:function(a){a.removeClass("active")}}),a.jsoneditor.themes.foundation=a.jsoneditor.AbstractTheme.extend({getChildEditorHolder:function(){return a("<div>").css({marginBottom:15})},getSelectInput:function(a){return this._super(a).css({width:"auto",minWidth:"none",padding:5,marginTop:3})},afterInputReady:function(a){a.closest(".compact").length&&a.css("margin-bottom",0)},getFormInputDescription:function(b){return a("<p></p>").text(b).css({marginTop:-10,fontStyle:"italic"})},getIndentedPanel:function(){return a("<div>").addClass("panel")},getHeaderButtonHolder:function(){return this.getButtonHolder().css({display:"inline-block",marginLeft:10,verticalAlign:"middle"})},getButtonHolder:function(){return a("<div>").addClass("button-group")},getButton:function(a,b,c){return this._super(a,b,c).addClass("small button")},addInputError:function(b,c){var d=b.closest(".form-control").addClass("error"),e=a(".errormsg",d);e.length||(e=a("<small class='errormsg'>").insertAfter(b)),e.text(c)},removeInputError:function(b){a(".errormsg",b.closest(".form-control").removeClass("error")).remove()}}),a.jsoneditor.themes.foundation3=a.jsoneditor.themes.foundation.extend({getHeaderButtonHolder:function(){return this._super().css({fontSize:".6em"})},getTabHolder:function(){return a("<div class='row'><dl class='tabs vertical two columns'></dl><div class='tabs-content ten columns'></div></div>")},getTab:function(b){return a("<dd></dd>").append(a("<a href='#'>").append(b))},getTabContentHolder:function(b){return a("> .tabs-content",b)},getTabContent:function(){return a("<div class='content active'></div>").css({paddingLeft:5})},markTabActive:function(a){a.addClass("active")},markTabInactive:function(a){a.removeClass("active")},addTab:function(b,c){a("> .tabs",b).append(c)}}),a.jsoneditor.themes.foundation4=a.jsoneditor.themes.foundation.extend({getHeaderButtonHolder:function(){return this._super().css({fontSize:".6em"})},getFormInputDescription:function(a){return this._super(a).css({fontSize:".8rem"})}}),a.jsoneditor.themes.foundation5=a.jsoneditor.themes.foundation.extend({getFormInputDescription:function(a){return this._super(a).css({fontSize:".8rem"})},getButton:function(a,b,c){return this._super(a,b,c).removeClass("small").addClass("tiny")},getTabHolder:function(){return a("<div><dl class='tabs vertical'></dl><div class='tabs-content'></div></div>")},getTab:function(b){return a("<dd></dd>").append(a("<a href='#'>").append(b))},getTabContentHolder:function(b){return a("> .tabs-content",b)},getTabContent:function(){return a("<div class='content active'></div>").css({paddingLeft:5})},markTabActive:function(a){a.addClass("active")},markTabInactive:function(a){a.removeClass("active")},addTab:function(b,c){a("> .tabs",b).append(c)}}),a.jsoneditor.themes.html=a.jsoneditor.AbstractTheme.extend({getFormInputLabel:function(a){return this._super(a).css({display:"block",marginBottom:3})},getFormInputDescription:function(a){return this._super(a).css({fontSize:".8em",margin:0,display:"inline-block",fontStyle:"italic"})},getIndentedPanel:function(){return a("<div>").css({border:"1px solid #ddd",padding:5,margin:5,borderRadius:3})},getChildEditorHolder:function(){return a("<div>").css({marginBottom:8})},getHeaderButtonHolder:function(){return this.getButtonHolder().css({display:"inline-block",marginLeft:10,fontSize:".8em",verticalAlign:"middle"})},getTable:function(){return a("<table>").css({borderBottom:"1px solid #ccc",marginBottom:5})},addInputError:function(b,c){b.css({borderColor:"red"});var d=b.closest(".form-control"),e=a(".errmsg",d);e.length||(e=a("<div style='color: red;' class='errmsg'>").appendTo(d)),e.text(c)},removeInputError:function(b){b.css({borderColor:""}),a(".errmsg",b.closest(".form-control")).remove()}}),a.jsoneditor.themes.jqueryui=a.jsoneditor.AbstractTheme.extend({getTable:function(){return a("<table>").attr("cellpadding",5).attr("cellspacing",0)},getTableHeaderCell:function(){return a("<th>").addClass("ui-state-active").css({fontWeight:"bold"})},getTableCell:function(){return a("<td>").addClass("ui-widget-content")},getHeaderButtonHolder:function(){return this.getButtonHolder().css({marginLeft:10,fontSize:".6em",display:"inline-block"})},getFormInputDescription:function(a){return this.getDescription(a).css({display:"inline-block",marginLeft:10})},getFormControl:function(b,c,d){return a("<div>").addClass("form-control").css({padding:"8px 0"}).append(b).append(c).append(d)},getDescription:function(b){return a("<span>").css({fontSize:".8em",fontStyle:"italic"}).text(b)},getButtonHolder:function(){return a("<div>").addClass("ui-buttonset").css({fontSize:".7em"})},getFormInputLabel:function(b){return a("<label>").text(b).css({marginRight:"5px"})},getButton:function(b,c,d){var e=a("<button>").addClass("ui-button ui-widget ui-state-default ui-corner-all");return c&&!b?e.addClass("ui-button-icon-only").append(c.addClass("ui-button-icon-primary ui-icon-primary")):c?e.addClass("ui-button-text-icon-primary").append(c.addClass("ui-button-icon-primary ui-icon-primary")):e.addClass("ui-button-text-only"),e.append(a("<span>").addClass("ui-button-text").text(b||d||".")),e.attr("title",d),e},setButtonText:function(b,c,d,e){b.empty(),d&&!c?b.removeClass("ui-button-text-icon-primary").removeClass("ui-button-text-only").addClass("ui-button-icon-only").append(d.addClass("ui-button-icon-primary ui-icon-primary")):d?b.removeClass("ui-button-icon-only").removeClass("ui-button-text-only").addClass("ui-button-text-icon-primary").append(d.addClass("ui-button-icon-primary ui-icon-primary")):b.removeClass("ui-button-icon-only").removeClass("ui-button-text-icon-primary").addClass("ui-button-text-only"),b.append(a("<span>").addClass("ui-button-text").text(c||e||".")),b.attr("title",e)},getIndentedPanel:function(){return a("<div>").addClass("ui-widget-content ui-corner-all").css({padding:"1em 1.4em"})},addInputError:function(b,c){var d=b.closest(".form-control"),e=a(".errormsg",d);e.length||(e=a("<div class='errormsg ui-state-error'>").appendTo(d)),e.text(c)},removeInputError:function(b){a(".errormsg",b.closest(".form-control")).remove()},markTabActive:function(a){a.removeClass("ui-widget-header").addClass("ui-state-active")},markTabInactive:function(a){a.removeClass("ui-state-active").addClass("ui-widget-header")}}),a.jsoneditor.AbstractIconLib=b.extend({mapping:{collapse:"",expand:"","delete":"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},icon_prefix:"",getIconClass:function(a){return this.mapping[a]?this.icon_prefix+this.mapping[a]:null},getIcon:function(b){var c=this.getIconClass(b);return c?a("<i>").addClass(c):null}}),a.jsoneditor.iconlibs.bootstrap2=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-up","delete":"trash",edit:"pencil",add:"plus",cancel:"ban-circle",save:"ok",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),a.jsoneditor.iconlibs.bootstrap3=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"glyphicon glyphicon-"}),a.jsoneditor.iconlibs.fontawesome3=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"ban-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),a.jsoneditor.iconlibs.fontawesome4=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"caret-square-o-down",expand:"caret-square-o-right","delete":"times",edit:"pencil",add:"plus",cancel:"ban",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fa fa-"}),a.jsoneditor.iconlibs.foundation2=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"remove",edit:"edit",add:"add-doc",cancel:"error",save:"checkmark",moveup:"up-arrow",movedown:"down-arrow"},icon_prefix:"foundicon-"}),a.jsoneditor.iconlibs.foundation3=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"x",edit:"pencil",add:"page-add",cancel:"x-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fi-"}),a.jsoneditor.iconlibs.jqueryui=a.jsoneditor.AbstractIconLib.extend({mapping:{collapse:"triangle-1-s",expand:"triangle-1-e","delete":"trash",edit:"pencil",add:"plusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",movedown:"arrowthick-1-s"},icon_prefix:"ui-icon ui-icon-"}),a.jsoneditor.templates.default=function(){var b=function(c){var d={};return a.each(c,function(c,e){if("object"==typeof e&&null!==e){var f={};a.each(e,function(a,b){f[c+"."+a]=b}),a.extend(d,b(f))}else d[c]=e}),d};return{compile:function(c){return function(d){var e=b(d),f=c+"";return a.each(e,function(a,b){f=f.replace(new RegExp("{{\\s*"+a+"\\s*}}","g"),b)}),f}}}},a.jsoneditor.templates.ejs=function(){return window.EJS?{compile:function(a){var b=new EJS({text:a});return function(a){return b.render(a)}}}:!1},a.jsoneditor.templates.handlebars=function(){return window.Handlebars},a.jsoneditor.templates.hogan=function(){return window.Hogan?{compile:function(a){var b=Hogan.compile(a);return function(a){return b.render(a)}}}:!1},a.jsoneditor.templates.markup=function(){return window.Mark&&window.Mark.up?{compile:function(a){return function(b){return Mark.up(a,b)}}}:!1},a.jsoneditor.templates.mustache=function(){return window.Mustache?{compile:function(a){return function(b){return Mustache.render(a,b)}}}:!1},a.jsoneditor.templates.swig=function(){return window.swig},a.jsoneditor.templates.underscore=function(){return window._?{compile:function(a){return function(b){return _.template(a,b)}}}:!1},a.jsoneditor.theme="html",a.jsoneditor.template="default",a.jsoneditor.resolvers.unshift(function(){return"multiple"}),a.jsoneditor.resolvers.unshift(function(a){return"string"==typeof a.type?a.type:void 0}),a.jsoneditor.resolvers.unshift(function(a){return"boolean"===a.type?"select":void 0}),a.jsoneditor.resolvers.unshift(function(a){return"any"===a.type?"multiple":void 0}),a.jsoneditor.resolvers.unshift(function(a){return"array"==a.type&&"table"==a.format?"table":void 0}),a.jsoneditor.resolvers.unshift(function(a){if(a.enum){if("array"===a.type||"object"===a.type)return"enum";if("number"===a.type||"integer"===a.type||"string"===a.type)return"select"}}),a.jsoneditor.resolvers.unshift(function(a){return a.oneOf?"multiple":void 0})}(jQuery);